<app-sidebar (toggleEmitter)="toggle()"></app-sidebar>
<section>
  <div id="wrapper" [ngClass]="{'active': showSidebar == false}">
    <div class="fakeLoader"></div>


    <div id="page-wrapper">

      <div class="row page-titles">
        <div class="col-md-5 align-self-center">
          <h3 class="text-themecolor">Proof Of Investment</h3>
        </div>
        <div class="col-md-7 align-self-center">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a [routerLink]="['/reports']">Reports</a></li>
            <li class="breadcrumb-item active">Proof Of Investment</li>
          </ol>
        </div>
      </div>

      <div class="container-fluid">
        <div class="row">
          <div class="col-md-12 col-sm-12">
            <div class="card">
              <div class="card-header">
                <div class="row">

                  <form [formGroup]="bankDetailsForm">
                    <div class="col-md-2" style="margin-top: 1.5rem;">
                      <input type="radio" name="emp_code_radio" value="1" (change)="Hideshow_Emp('1')">&nbsp;

                      <span for="SearchByEmployeeCode">TP / Org Emp Code</span><br>
                      <input type="radio" name="emp_code_radio" value="2" (change)="Hideshow_Emp('0')" checked>&nbsp;
                      <span for="SearchByEmployeeCodeNo">All</span>
                    </div>

                    <div class="col-md-3" *ngIf="addRemoveHide">
                      <!-- <span for="SearchByEmployeeCode">Employee Code</span> -->
                      <label>TP / Org Emp Code</label>
                      <input class="form-control" type="text" formControlName="EmployeeCode"
                        placeholder="Enter TP / Org Emp Code">
                    </div>

                    <div class="col-md-2">
                      <label>Financial Year</label>
                      <!-- <span for="SearchByEmployeeCode">Financial Year</span> -->
                      <select class="form-control" name="financialyear" placeholder="Enter Financial Year"
                        formControlName="financialyear">
                        <option value=""> Select Financial Year</option>
                        <ng-container *ngFor="let year of fiscalYears">
                          <option [value]="year" [selected]="bankDetailsForm.get('financialyear').value === year">{{
                            year }}</option>
                        </ng-container>
                      </select>
                    </div>
                  </form>

                  <div class="col-md-3">
                    <div class="row" style="margin-top: 2.4rem;">
                      <div class="col-md-4">
                        <div class="save-button">
                          <button class="btn btn-primary" (click)="InvestmentReportResultApi()">Search</button>
                        </div>

                      </div>
                      <div class="col-md-4">
                        <div class="save-button">
                          <button class="btn btn-primary Reset-btn-box" (click)="Reset()">Reset</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-1" style="margin-top: 25px;float:right;">
                    <a class="btn btn-round btn-success excel-btn-box" style="padding-top: 9px;"
                      (click)="SaveColumnValues()" title="Click to save reports"> <i class="fa fa-save"></i></a>

                  </div>
                  <div class="col-md-3" style="float: right; margin-top: 2.1rem;">
                    <div class="Show-Fields-top-outer-box" style="margin-left: 10px;">
                      <div class="dropdown float-right-box">
                        <ul class="nav nav-pills" role="tablist">
                          <li role="presentation" class="dropdown">
                            <a href="#" id="drop6" data-toggle="dropdown" role="button" aria-haspopup="true"
                              aria-expanded="true" class="dropdown-toggle btn btn-user1 btn-round btn-primary">Export as
                              <span class="caret"></span></a>
                            <ul id="menu3" aria-labelledby="drop6" class="dropdown-menu">
                              <li><a (click)="exportToExcel()" style="cursor: pointer;"> XLSX (Microsoft Excel)</a></li>
                              <li><a (click)="exportToPDF()" style="cursor: pointer;"> PDF</a></li>
                            </ul>
                          </li>
                        </ul>
                      </div>


                      <div class="dropdown btn-group Show-Fields-outer-box" style=" margin-left: 10px;">
                        <button type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                          aria-expanded="false" class="btn btn-primary dropdown-toggle"> Show Fields <span
                            class="caret"></span></button>

                        <ul class="dropdown-menu showhide" aria-labelledby="dropdownMenuButton"
                          style="overflow-y: auto; margin-left: -5rem;max-height: 300px;">
                          <li *ngFor="let fields of fieldarray; let i = index">
                            <a class="dropdown-item" (click)="$event.stopPropagation()">
                              <label>
                                <input type="checkbox" (click)="hideshowfields($event,fields)"
                                  [checked]="showfields[fields.value] ? true : null">
                                <span style="font-size: small;">{{fields.name}}</span>
                              </label>
                            </a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>


                  <div class="col-md-12">

                    <div class="col-md-3 form-check">
                      <input class="form-check-input" type="checkbox" id="flexCheckDefault"
                        [(ngModel)]="includeEmployeeDetails" (click)="toggleShowFields()">
                      <label class="form-check-label" for="flexCheckDefault">
                        Include Employee Details
                      </label>
                    </div>

                    <div class="col-sm-4 text-right" style="margin-top:1.5 rem">
                      <a id="changeDateBtn" class="btn btn-success btn-block" style="font-weight:bold;"
                        (click)="GetInvestment_DeclarationDate()">
                        Change Investment Declaration Date </a>
                    </div>
                  </div>

                </div>
              </div>

              <!-- *ngIf="data.length>0" -->

              <div class="card-body">
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="table-responsive reports-table-outer-box reports-new-table-outer-box">
                    <table class="table table-striped table-bordered">
                      <thead style="background: skyblue;">
                        <tr>
                          <th>S.NO</th>
                          <th>Document</th>
                          <th>Employee Name</th>
                          <th>TP / Org Emp Code</th>
                          <th *ngIf="includeEmployeeDetails || showfields['pancard']">PAN Card</th>
                          <th *ngIf="includeEmployeeDetails || showfields['financial_year']">Financial Year</th>
                          <th *ngIf="includeEmployeeDetails || showfields['approveddocs']">Approved Docs</th>
                          <th *ngIf="includeEmployeeDetails || showfields['rejecteddocs']">Rejected Docs</th>
                          <th *ngIf="includeEmployeeDetails || showfields['pendingdocs']">Pending Docs</th>
                          <th *ngIf="includeEmployeeDetails || showfields['totaldocs']">Total Docs</th>
                          <th>Download</th>
                        </tr>
                      </thead>
                      <!-- *ngFor="let report of data;let i=index; -->
                      <tbody style="background: aliceblue;">
                        <ng-container *ngFor="let report of data;let i=index;">
                          <tr [ngClass]="{'light-skyblue': i % 2 == 0, 'white': i % 2 != 0}">
                            <td>{{i+1}}</td>

                            <td>
                              <a (click)="openTaxPopup(report.financial_year,report.emp_code)" style="cursor: pointer;">
                                View Tax
                                <i class="fa fa-eye getRegime"></i>
                              </a>
                            </td>

                            <td>{{report.emp_name}}</td>
                            <!-- <td>{{report.emp_code}} </td> -->
                            <td> {{ (report.orgempcode !== '' && report.orgempcode != null && report.orgempcode !=
                              undefined) ? report.orgempcode : report.tpcode }}</td>
                            <td *ngIf="includeEmployeeDetails || showfields['pancard']">{{report.pancard}}</td>
                            <td *ngIf="includeEmployeeDetails || showfields['financial_year']">{{report.financial_year}}
                            </td>
                            <td *ngIf="includeEmployeeDetails || showfields['approveddocs']">{{ report.approveddocs }}
                            </td>
                            <td *ngIf="includeEmployeeDetails || showfields['rejecteddocs']">{{report.rejecteddocs}}
                            </td>
                            <td *ngIf="includeEmployeeDetails || showfields['pendingdocs']">{{report.pendingdocs}}</td>
                            <td *ngIf="includeEmployeeDetails || showfields['totaldocs']">{{report.totaldocs}}</td>
                            <td>
                              <div class="download-options">
                                <a class="download-icon" (click)="exportToIndividualExcel(report)" title="Download Excel" aria-label="Download as Excel for {{report.emp_name || 'Employee'}}">
                                  <i class="fas fa-file-excel"></i>
                                </a>
                                <a class="download-icon" (click)="exportToIndividualPDF(report)" title="Download PDF" aria-label="Download as PDF for {{report.emp_name || 'Employee'}}">
                                  <i class="fas fa-file-pdf"></i>
                                </a>
                              </div>             
                            </td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                    <alert></alert>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Change Modal Code -->
    <div [@grooveState]="changeDateModalShow?'active':'inactive'" id="changeDateModal" class="modal">
      <div [@dongleState]="changeDateModalShow?'active':'inactive'" class="modal-dialog" style="margin:auto;">
        <div class="modal-content">
          <form [formGroup]="Change_Modal_Form">
            <div class="modal-header">
              <button type="button" (click)="CloseChangeDateModalShow()" class="close" data-dismiss="modal"
                aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title" id="changeDateModalLabel">Investment Declaration Date</h4>
            </div>
            <div class="modal-body">
              <div class="Appointment-outer-box">
                <table class="table">
                  <tr style="background: skyblue">

                    <td style="width: 100px;"> From Date:</td>
                    <td>
                      <input class="form-control" type="text" id="from_Date" placeholder="dd-mm-yyyy"
                        formControlName="From_Date" style="cursor: pointer;">
                    </td>
                    <td>To Date:</td>
                    <td>
                      <input class="form-control" type="text" id="to_Date" placeholder="dd-mm-yyyy"
                        formControlName="To_Date" style="cursor: pointer;">
                    </td>
                  </tr>
                  <tr style="background: #c4eeff;">
                    <td>Type:</td>
                    <td>
                      <select class="form-control" id="invType" formControlName="Type" placeholder="Enter Type">
                        <option value=''>--Please Select--</option>
                        <option value='D'>Declaration</option>
                        <option value='P'>Proof</option>
                      </select>
                    </td>
                    <ng-container *ngIf="Change_Modal_Form.get('Type').value !== 'D'; else declarationColumns">
                      <td style="width: 110px;">Proof Date:</td>
                      <td>
                        <input class="form-control" type="text" id="proof_date" placeholder="dd-mm-yyyy"
                          formControlName="Proof_dt" style="cursor: pointer;">
                      </td>
                    </ng-container>
                    <ng-template #declarationColumns>
                      <td></td>
                      <td></td>
                    </ng-template>
                  </tr>
                </table>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" (click)="CloseChangeDateModalShow()" class="btn btn-default"
                data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" id="changeDateModalBtn"
                (click)="SaveInvestment_DeclarationDate()">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Tax Projection Modal made by Arpit------>

    <div [@grooveState]="showTaxPopup?'active':'inactive'" id="allowanceDeduct" class="modal">
      <div [@dongleState]="showTaxPopup?'active':'inactive'" class="modal-dialog modal-xl" style="margin:auto;">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Tax Projection For Financial Year: {{
              this.financial_yr}}</h4>
            <button type="button" class="close" (click)="closeTaxpopup()" data-dismiss="modal"
              aria-hidden="true">&times;</button>
          </div>
          <div class="modal-body" style="max-height: 400px; overflow-y: auto;">
            <div class="row">
              <div class="col-sm-12">
                <a class="btn btn-round btn-success excel-btn-box pull-right" style="padding-top: 9px;"
                  (click)="exportToExcel1()">&nbsp;<i class="fa fa-file-excel-o" aria-hidden="true"></i></a>
                <h4 class="text-center">Tax By Month</h4>
                <div class="Appointment-outer-box">
                  <div class="table-responsive reports-table-outer-box">
                    <table class="table table-striped table-bordered">
                      <thead style="background: skyblue;">
                        <tr>
                          <th>Fields</th>
                          <th>Apr</th>
                          <th>May</th>
                          <th>Jun</th>
                          <th>Jul</th>
                          <th>Aug</th>
                          <th>Sep</th>
                          <th>Oct</th>
                          <th>Nov</th>
                          <th>Dec</th>
                          <th>Jan</th>
                          <th>Feb</th>
                          <th>Mar</th>
                          <th>Cumulative</th>
                        </tr>
                      </thead>

                      <tbody id="taxbymonthtbody">
                        <tr style="background: aliceblue;">
                          <td><span [innerHTML]="taxByMonth_data.fields"></span>
                          </td>
                          <td
                            *ngFor="let month of ['apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec', 'jan', 'feb', 'mar']">
                            <span [innerHTML]="taxByMonth_data[month]"></span>
                          </td>
                          <td><span [innerHTML]="taxByMonth_data.totalgrossearning"></span>
                          </td>

                        </tr>
                      </tbody>
                    </table>

                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <h4 class="text-center">Tax Projection</h4>
                <div class="Appointment-outer-box">
                  <div class="table-responsive reports-table-outer-box">
                    <table class="table table-striped table-bordered">
                      <thead style="background: skyblue;">
                        <tr>
                          <th>Total Income</th>
                          <th>Total Savings</th>
                          <th>Taxable Income</th>
                          <th>Net Payable Tax</th>
                          <th>Tax Deducted</th>
                          <th>Balance Tax</th>
                          <th>Tax Slab</th>
                        </tr>
                      </thead>
                      <tbody id="taxProjectionResult" style="background: aliceblue;">

                        <td>{{taxprojection_data.totalincome}}</td>
                        <td>{{taxprojection_data.totalsavings}}</td>
                        <td>{{taxprojection_data.taxableincome}}</td>
                        <td>{{taxprojection_data.netpayabletax}}</td>
                        <td>{{taxprojection_data.taxdeducted}}</td>
                        <td>{{taxprojection_data.balancetax}}</td>
                        <td>{{taxprojection_data.taxslab}}</td>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <h4>Total Income</h4>
                <div class="Appointment-outer-box">
                  <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                      <thead style="background: skyblue;">
                        <tr>
                          <th>Income Head</th>
                          <th>Income</th>
                        </tr>
                      </thead>

                      <tbody id="totalIncomeResult" style="background: aliceblue;">
                        <tr *ngFor="let income of totalincome_data; let i = index;">
                          <td>{{ income.incomehead }}</td>
                          <td>{{ income.income }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <h4>
                  Total Saving
                  <a data-target='#uploadProof' data-toggle='modal' style='display:none;'
                    class='btn btn-info btn-sm upload_proof'>Upload Proofs
                  </a>

                  <a data-target='#invProofModal' data-toggle='modal' id='verifyProofs' style='margin-left: 1rem;'
                    class='btn btn-success btn-sm'
                    (click)="open_verify_Popup(taxByMonth_data.emp_code,taxByMonth_data.emp_name)">Verify Proofs
                  </a>


                </h4>
                <div class="Appointment-outer-box">
                  <div class="table-responsive reports-table-outer-box">
                    <table class="table table-striped table-bordered">
                      <thead style="background: skyblue;">
                        <tr>
                          <th>Saving Head</th>
                          <th>Saving</th>
                          <th>Status</th>
                        </tr>
                      </thead>
                      <tbody id="totalSavingResult" style="background: aliceblue;">

                        <tr *ngFor="let income of totalsaving_data; let i = index;">
                          <td>
                            <div [innerHTML]="decodeHtmlContent(income.savinghead)"></div>
                          </td>
                          <td>{{ income.saving }}</td>
                          <td>{{ income.approval_status }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <h4>Chapter VI Components <a data-target='#chsixmodal' data-toggle='modal'></a></h4>
                <!-- <input type="hidden" id="ch6id" name="ch6id" value="1"> -->

                <div class="Appointment-outer-box">
                  <div class="table-responsive reports-table-outer-box">
                    <table class="table table-striped table-bordered">
                      <thead style="background: skyblue;">
                        <tr>
                          <th>Component Name</th>
                          <th>Component Value(Declaration)</th>
                          <th>Component Value(Proof)</th>
                          <th>Status</th>
                        </tr>
                      </thead>
                      <tbody id="chapterSixCompResult" style="background: aliceblue;">
                        <tr *ngFor="let income of chaptersixcomp_data; let i = index;">
                          <td>{{ income.componentname }}</td>
                          <td>{{ income.declr_amount }}</td>
                          <td>{{ income.componentvalue }}</td>
                          <td>{{ income.approval_status }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <h4>U/S 80C Components <a data-target='#us80cmodal' data-toggle='modal' style="display: none;"
                    class='btn btn-info btn-sm us80c' rel_headid='2'>Upload U/S 80c Proofs</a></h4>
                <input type="hidden" id="80cid" name="80cid" value="2">
                <div class="Appointment-outer-box">
                  <div class="table-responsive reports-table-outer-box">
                    <table class="table table-striped table-bordered">
                      <thead style="background: skyblue;">
                        <tr>
                          <th>Component Name</th>
                          <th>Component Value(Declaration)</th>
                          <th>Component Value(Proof)</th>
                          <th>Status</th>
                        </tr>
                      </thead>
                      <tbody id="us80cCompResult" style="background: aliceblue;">

                        <tr *ngFor="let income of us80ccomp_data; let i = index;">
                          <td>{{ income.componentname }}</td>
                          <td>{{ income.declr_amount }}</td>
                          <td>{{ income.componentvalue }}</td>
                          <td>{{ income.approval_status }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <h4>Flexi Allowance Components </h4>
                <!-- <input type="hidden" id="80cid" name="80cid" value="2"> -->
                <div class="Appointment-outer-box">
                  <div class="table-responsive reports-table-outer-box">
                    <table class="table table-striped table-bordered">
                      <thead style="background: skyblue;">
                        <tr>
                          <th>Component Name</th>
                          <th>Component Value(Declaration)</th>
                          <th>Component Value(Proof)</th>
                          <th>Status</th>
                        </tr>
                      </thead>
                      <tbody id="flexiallowanceCompResult" style="background: aliceblue;">

                        <tr *ngFor="let income of flexiallowancecomp_data; let i = index;">
                          <td>{{ income.componentname }}</td>
                          <td>{{ income.declr_amount }}</td>
                          <td>{{ income.componentvalue }}</td>
                          <td>{{ income.approval_status }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <!--Chandra sssss-->
                <!--Chandra sssss-->
                <ng-container *ngIf="declaration_or_proof === 'D'; else declarationProofClosed">
                  <div class="col-md-6">
                    <div class="Appointment-outer-box">
                      <div class="table-responsive reports-table-outer-box reports-new-table-outer-box">
                        <div style="border: 1px solid #ccc; border-radius: 5px; overflow: hidden;">
                          <div style="background: skyblue; padding: 10px; font-weight: bold;">
                            Declaration
                          </div>
                          <div style="padding: 10px; ">
                            I hereby declare that the particulars given on pre-page/above are correct and complete in
                            all
                            respect. I may be allowed appropriate tax rebate while calculating my tax liability of
                            Financial
                            Year {{this.financial_yr}} (Assessment Year {{this.start}} - {{this.end}}).
                          </div>
                          <div style="padding: 10px; ">
                            <b>The self-attested documentary proof for claiming the benefits of various savings /
                              investments already made or likely to
                              be made, will be submitted by 15th January {{this.start}} failing which the tax may be
                              recovered from me by nullifying the
                              savings / investments stated in declaration form.</b>
                          </div>
                          <div style="padding: 10px; ">
                            I hereby state that the claim of deduction shown above is in my name and if it is in joint
                            account then it is declared herewith
                            that the other claimant will not claim it in his/her ITR.
                          </div>
                          <div style="padding: 10px; ">
                            In case of payment/ contribution/ investments, I will produce the original document for
                            verification,
                            whenever it will be asked for.
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </ng-container>
                <ng-template #declarationProofClosed>
                  <div class="col-md-6"></div>
                </ng-template>
                <!--Chandra eeee-->
                <!--Chandra eeee-->
                <div class="col-md-6">
                  <div class="Appointment-outer-box">
                    <div class="table-responsive reports-table-outer-box reports-new-table-outer-box">
                      <table class="table table-striped table-bordered">
                        <thead style="background: skyblue">
                          <tr>
                            <th colspan="2">Note</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td style="padding: 8px;">1</td>
                            <td style="padding: 8px;">
                              All employees are requested to keep the bills/Tax Invoice etc. on a monthly basis at their
                              end to avail exemption under Flexi Allowances.
                            </td>
                          </tr>
                          <tr>
                            <td style="padding: 8px;">2</td>
                            <td style="padding: 8px;">
                              In case of Uniform Allowance, exemption is limited to the purchase of formal clothes by
                              the
                              employee for himself/herself only.
                            </td>
                          </tr>
                          <tr>
                            <td style="padding: 8px;">3</td>
                            <td style="padding: 8px;">
                              For claiming exemption under Driver/Fuel allowance, the vehicle should be in the name of
                              the
                              employee.
                            </td>
                          </tr>
                          <tr>
                            <td style="padding: 8px;">4</td>
                            <td style="padding: 8px;">
                              If purchases are made online, then the bills/invoices must be supported by a delivery
                              challan.
                            </td>
                          </tr>
                          <tr>
                            <td style="padding: 8px;">5</td>
                            <td style="padding: 8px;">
                              No COD transactions will be accepted. Further, any purchases made in cash exceeding Rs.
                              10,000/- will not be considered.
                            </td>
                          </tr>
                          <tr>
                            <td style="padding: 8px;">6</td>
                            <td style="padding: 8px;">
                              Only Bills/Invoices depicting proper particulars of items purchased will be accepted.
                              Particulars mentioning only codes will not be accepted for exemption.
                            </td>
                          </tr>
                          <tr>
                            <td style="padding: 8px;">7</td>
                            <td style="padding: 8px;">
                              All POS transactions should be supported by proper receipts. It is further requested that
                              photocopies of such invoices be kept beforehand.
                            </td>
                          </tr>
                          <tr>
                            <td style="padding: 8px;">8</td>
                            <td style="padding: 8px;">
                              LTA exemption is restricted to two times in a block of four years. The current block is
                              2022-2025.
                            </td>
                          </tr>
                          <tr>
                            <td style="padding: 8px;">9</td>
                            <td style="padding: 8px;">
                              The LTA Form should be supported by the original boarding pass if the journey is
                              undertaken
                              by Air.
                            </td>
                          </tr>
                          <tr>
                            <td style="padding: 8px;">10</td>
                            <td style="padding: 8px;">
                              While purchasing, please ensure to collect Tax invoices and proof of payment.
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>

            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" (click)="closeTaxpopup()" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Inv Proof Docs modal made by Arpit -->

    <div [@grooveState]="verify_Popup?'active':'inactive'" id="allowanceDeduct" class="modal">
      <div [@dongleState]="verify_Popup?'active':'inactive'" class="modal-dialog" class="modal-dialog modal-xl"
        style="margin:auto">
        <div class="modal-content">
          <form>
            <div class="modal-header theme-bg">
              <h4 class="modal-title">Verify Docs: {{this.emp_name}}-{{this.emp_code}} </h4>
              <button type="button" class="close" (click)="close_popup()" data-dismiss="modal"
                aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 400px; overflow-y: auto;">
              <div class="Appointment-outer-box">
                <div id="invProofTableVerify_filter" class="dataTables_filter" style="margin-left: 70% ">
                  <label>Search:<input type="search" class="" placeholder="" aria-controls="invProofTableVerify"
                      (keyup)="search($event)"></label>
                </div>
                <div class="table-responsive reports-table-outer-box reports-new-table-outer-box">

                  <table class="table table-striped table-bordered" id="invProofTableVerify">
                    <thead style="background: skyblue;">
                      <th>S.No</th>
                      <th style="text-align: center;">
                        <input type="checkbox" style="transform: scale(1.5)" name="header_checkbox"
                          [(ngModel)]="header_checkbox" (change)="selectAll($event)"
                          [disabled]="filtered_data[0]?.is_fianncialyearcompleted === 'C'">
                      </th>
                      <th>View Doc</th>
                      <th>Head Type</th>
                      <th>Status</th>
                      <th>Interest Amount</th>
                      <th>Receipt Amount</th>
                      <th>Receipt Number</th>
                      <th>Is First Time Buyer</th>
                      <th>Is Before 1st Apr 1999</th>
                      <th>Landlord Address</th>
                      <th>Landlord City</th>
                      <th>Landlord Name</th>
                      <th>Landlord Pan</th>
                      <th>Landlord State</th>
                      <th>Lender Name</th>
                      <th>Lender Pancard 1</th>
                      <th>Lender Pancard 2</th>
                      <th>Lender Pancard 3</th>
                      <th>Lender Pancard 4</th>
                      <th>Loan Amount</th>
                      <th>Loan Holder Name</th>
                      <th>Loan Holder Type</th>
                      <th>Loan No</th>
                      <th>Loan Sanction Date</th>
                      <th>Loan Type</th>
                      <th>Name Of Owner</th>
                      <th>Principal Amount</th>
                      <th>Property Value</th>
                      <th>Remark</th>
                    </thead>
                    <tbody style="background: aliceblue;">
                      <ng-container *ngFor="let report of filtered_data;let i=index;">
                        <tr [ngClass]="{'light-skyblue': i % 2 == 0, 'white': i % 2 != 0}">
                          <td>{{i+1}}</td>

                          <td style="text-align: center;">
                            <ng-container *ngIf="report.status === 'pending'">
                              <input type="checkbox" style="transform: scale(1.5)" name="yourCheckboxName"
                                [checked]="report.isSelected" (change)="onCheckbox_Change($event, report,i)"
                                [disabled]="report.is_fianncialyearcompleted === 'C'">
                            </ng-container>
                            <ng-container *ngIf="report.status === 'Accepted'">
                              <span style="color: green;">✔</span>
                            </ng-container>
                            <ng-container *ngIf="report.status === 'Rejected'">
                              <span style="color: red;">✘</span>
                            </ng-container>
                          </td>

                          <td>
                            <a *ngIf="report.documentpath" [href]="report.documentpath" target="_blank">View</a>
                          </td>

                          <td>{{report.headtype}}</td>
                          <td>{{report.status}}</td>
                          <td>{{report.interest_amount}}</td>
                          <td>{{report.receipt_amount}}</td>
                          <td>{{report.receipt_number}}</td>
                          <td>{{report.is_firsttymebuyer}} </td>
                          <td>{{report.isbefore01apr1999}}</td>
                          <td>{{report.landlord_address}}</td>
                          <td>{{report.landlord_city}}</td>
                          <td>{{report.landlord_name}}</td>
                          <td>{{report.landlord_pan}}</td>
                          <td>{{report.landlord_state}}</td>
                          <td>{{report.lender_name}}</td>
                          <td>{{report.lender_pannumber1}}</td>
                          <td>{{report.lender_pannumber2}}</td>
                          <td>{{report.lender_pannumber3}}</td>
                          <td>{{report.lender_pannumber4}}</td>
                          <td>{{report.loan_amount}}</td>
                          <td>{{report.loan_holder_name}}</td>
                          <td>{{report.loan_holder_type}}</td>
                          <td>{{report.loan_no}}</td>
                          <td>{{report.loan_sanction_date}}</td>
                          <td>{{report.loan_type }}</td>
                          <td>{{report.name_of_owner}}</td>
                          <td>{{report.principal_amount}}</td>
                          <td>{{report.property_value}}</td>
                          <td>{{report.remarks}}</td>
                        </tr>
                      </ng-container>
                    </tbody>
                  </table>
                </div>

                <div class="row" style="margin-top: 2rem;">
                  <div class="col-sm-12 text-center"
                    *ngIf="filtered_data.length != 0 && filtered_data[0]?.is_fianncialyearcompleted != 'C'">
                    <form [formGroup]="Remark_Form">
                      <button id="approveSelectedBtn" type="button" class="btn btn-success"
                        (click)="VerifyInvestmentProof('A',this.emp_code)"
                        [disabled]="!header_checkbox && !isAnyCheckboxChecked()">Approve</button>

                      <button id="rejectSelectedBtn" style="margin-left: 1rem;" type="button" class="btn btn-danger"
                        (click)="VerifyInvestmentProof('R',this.emp_code)"
                        [disabled]="!header_checkbox && !isAnyCheckboxChecked()">
                        Reject
                      </button>


                      <!-- &&  Remark_Form.get('Remarks').invalid  -->

                      <input name="textbox1" formControlName="Remarks" class="remarks" type="text" placeholder="Remarks"
                        style="margin-left: 15px;">
                    </form>
                  </div>
                </div>

              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" (click)="close_popup()">Close</button>
            </div>
          </form>
        </div>
      </div>
    </div>

  </div>
</section>
<app-footer></app-footer>