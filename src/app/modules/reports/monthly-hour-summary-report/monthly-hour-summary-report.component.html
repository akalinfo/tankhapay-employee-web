<app-sidebar (toggleEmitter)="toggle()"></app-sidebar>
<section>
  <div id="wrapper" [ngClass]="{'active': showSidebar == false}">
    <div class="fakeLoader"></div>


    <div id="page-wrapper">

      <div class="row page-titles">
        <div class="col-md-5 align-self-center">
          <h3 class="text-themecolor">Monthly Hour Summary </h3> <h5 style="color:#6b6bb7"> [{{getMonth()}}-{{this.year}}]</h5>
        </div>
        <div class="col-md-7 align-self-center">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a [routerLink]="['/reports']">Reports</a></li>
            <li class="breadcrumb-item active">Monthly Hour Summary </li>
          </ol>
        </div>
      </div>

      <div class="container-fluid">
        <div class="row">


          <!-- <div class="col-md-12 col-sm-12">
            <div class="card filter-outer-main-box" style="z-index: 999;">
                <div class="card-body" style="margin: 7px;">
                    <form [formGroup]="checkin_Form">
                    <div class="col-md-1 col-sm-1 text-right padd-0">
                      <div class="form-group">
                          <h3>Filter By :</h3>
                      </div>
                    </div>

                    <div class="col-md-2">
                        <div class="form-group">
                          <input id="ToDate" #rd class="form-control" type="text" style="cursor: pointer;"
                          formControlName="ToDate" placeholder="dd-mm-yyyy" autocomplete="off" readonly>
                        </div>
                    </div>

                    <div class="col-md-2 padd-0">
                        <div class="form-group">
                          <select
                            id="markedDropdown"
                            class="form-control"
                            formControlName="markedStatus">
                            <option value="Marked">Marked</option>
                            <option value="Not Marked">Not Marked</option>
                            <option value="All">All</option>
                          </select>
                        </div>
                    </div>

                    <div class="col-md-1 padd-0">
                        <a class="btn excel-btn-box results btn-primary"
                          style="padding: 9px; border-radius: 0;"
                          (click)="synced_punches()">
                          <i class="fa fa-search" aria-hidden="true"></i>
                        </a>
                    </div>

                    </form>
                </div>
            </div>
          </div> -->


          <div class="col-md-12 col-sm-12">
            <div class="card" style="white-space: nowrap;">
              <div class="card-header">
                <div class="row">

                  <!-- <div class="col-md-12 col-sm-12">
                    <div class="card filter-outer-main-box" style="z-index: 999;">
                      <div class="card-body ">
                        <div class="row">
                          <a (click)="openSidebar()" class="btn excel-btn-box results filter-onlick-btn"
                            style="padding-top: 9px;float:right;margin-right: 2rem;">Search<i
                              class="fa fa-filter"></i></a>
                        </div>
                      </div>
                    </div>
                  </div> -->

                  <div class="col-md-12 col-sm-12">
                    <div class="row">
                      <!-- <div class="col-sm-12"> -->
                      <!-- <div class="col-sm-2"></div> -->
                      <!-- <div class="col-md-3">
                          <span><strong>Check-In: {{ this.tot_check_in }} </strong></span>
                        </div>
                        <div class="col-md-3">
                          <span><strong>Check-Out: {{ this.tot_check_out }} </strong></span>
                        </div> -->
                      <div class="col-md-9" style="margin-top: 10px;">
                        <span><strong>Total: {{ this.employee_data.length }} </strong></span>
                      </div>
                      <div class="col-md-2 filter-outer-main-box" style="z-index: 10;">
                        <a (click)="openSidebar()" class="btn excel-btn-box results filter-onlick-btn"
                          style="padding-top: 9px;float:right;margin-right: 0rem; margin-top: 7px;">Search<i
                            class="fa fa-filter"></i></a>
                      </div>
                      <div class="col-md-1 col-sm-1">
                        <div class="Show-Fields-top-outer-box" style="float: right;">
                          <div class="dropdown float-right-box">
                            <a class="btn btn-round btn-success excel-btn-box" style="padding-top: 9px;"
                              (click)="exportToExcelTable()">&nbsp;<i class="fa fa-file-excel-o" aria-hidden="true"></i></a>
                            <!-- <a class="btn btn-round btn-success pdf-btn-box" (click)="exportToPdf()">&nbsp;<i
                                class="fa fa-file-pdf-o" aria-hidden="true"></i></a> -->
                          </div>
                        </div>
                      </div>
                    </div>

                  </div>

                  <!-- <div class="col-md-12">
                  <b>Last Face check data Sync :</b> {{ checkInOutDeviceStatus.last_offline_sync_date }}
                  <br><b>Device Mode :</b> {{ checkInOutDeviceStatus.last_offline_sync_status }}
                  </div> -->

                </div>
              </div>
              <!-- <div class="card-body" *ngIf="this.employee_data.length!=0"> -->
              <!-- <ul class="list"> -->

              <!-- <li class="manage-list-row manage-pay-select clearfix"
                    *ngFor="let emp of employee_data; let i = index">
                   -->

              <!-- <div class="row"> -->
              <!-- <div class="col-sm-3">
                        <div class="job-info" (click)="getEmp_code(emp,i)" style="cursor: pointer;"
                          title="Click to View Details">
                          <div class="profile-container">
                            <img src="{{emp.photopath}}" class="attachment-thumbnail" alt="user-images"
                              *ngIf="(emp.photopath != '' && emp.photopath != null)">
                            <div class="profile-img-box" *ngIf="(emp.photopath == '' || emp.photopath == null)">
                              <span>{{emp.emp_name.charAt(0)}}{{emp.emp_name.charAt(emp.emp_name.indexOf(' ') +
                                1)}}</span>
                            </div>
                          </div>
                          <div class="job-details">
                            <h5 class="job-name"><a class="job_name_tag" (click)="getEmp_code(emp,i)"
                                style="cursor: pointer;">{{emp.emp_name}}</a></h5>
                          </div>
                        </div>
                      </div> -->
              <!-- <div class="col-sm-3"  >
                        <div class="job-company" ><strong>In Time:</strong> <span [ngClass]="{'has-time': emp.check_in_time!='00:00'}"> {{emp.check_in_time}}</span></div>
                        <br>
                        <div class="job-company" ><i class="fa fa-map-marker" aria-hidden="true"></i>
                          &nbsp; {{emp.check_in_location}}</div>
                      </div> -->
              <!-- <div class="col-sm-3" >

                        <div class="job-company"  ><strong>Out Time:</strong> <span [ngClass]="{'has-time': emp.check_out_time!='00:00'}"> {{emp.check_out_time}}</span></div>
                        <br>
                        <div class="job-company"> <i class="fa fa-map-marker" aria-hidden="true"></i> &nbsp;
                          {{emp.check_out_location}}
                        </div> -->

              <!-- <div class="job-company">
                              <button (click)="getEmp_code(emp,i)" class="btn">
                                <i class="fa fa-arrow-circle-right" style="font-size:36px"></i>
                              </button>
                            </div> -->


              <!-- <div class="placeholder-image" style="display:none;" data-v-b4b8095a="">
                          <div class="placeholder-image__bg" data-v-b4b8095a=""></div>
                        </div>

                      </div> -->
              <!-- <div class="col-md-3">
                        <div class="job-company"><strong>Hrs :</strong>{{emp.no_of_hours_worked}}</div>
                      </div> -->
              <!-- </div> -->
              <!-- </li> -->
              <!-- </ul> -->
              <!-- </div> -->
              <div class="card-body padd-bot-0 padd-top-0" *ngIf="this.employee_data?.length!=0">

                <div class="row">
                  <div class="col-md-12 padd-top-0">
                    <div class="table-responsive bulk-attendance-outer-box Reimbursements-outer-box reports-main-outerbox-table">

                      <table class="table table-hover table_fixed table-border" id="hourSummaryReportTable">
                        <thead >
                          <tr style="font-size:14px;">
                            <th>Sr. No.</th>
                            <th>Employee Name</th>
                            <th>Email ID</th>
                            <th>Designation</th>
                            <th>Org Unit Name</th>
                            <th>Total Working Days</th>
                            <th>Total Hours Worked</th>
                            <!-- <th>Average Hours per Day</th> -->
                            <th>Total Overtime Hours</th>
                            <th>Total Payable Amount</th>
                            <th>Deductions (if any) </th>
                            <th>Net Pay</th>
                          </tr>
                        </thead>
                        <tbody>
                          <ng-container *ngFor="let emp of employee_data; let i = index">
                            <!-- (click)="open_new_Panel(i, emp)" title="Click to View details"
                                   -->
                            <tr (click)="navigateToEmployeeDetails(emp)" title="Click to View details" style="cursor: pointer; ">
                              <td>{{i+1}}</td>
                              <td>{{emp?.emp_name }} ({{emp?.orgempcode || emp?.cjcode || ''}})</td>
                              <td>{{emp?.email}}</td>
                              <td>{{emp.designation}}</td>
                              <td style="font-size: 12px;">{{emp?.assigned_ou_ids_names}}</td>
                              <td>{{emp?.total_working_days}}</td> <!--Not coming-->
                              <td>{{emp?.no_of_hours_worked}}</td>
                              <!-- <td>{{emp?.average_hours_per_day}}</td> -->
                              <td>{{emp?.no_of_overtime_hours_worked}}</td>
                              <td>{{emp?.total_payable_amount}}</td><!--Not coming-->
                              <td>{{emp?.dedution_if_any}}</td><!--Not coming-->
                              <td>{{emp?.netpay}}</td><!--Not coming-->
                            </tr>



                            <tr id="collapseOne{{i}}" class="panel-collapseOne collapse" role="tabpanel"
                              aria-labelledby="designing">
                              <td colspan="100%">
                                <div>
                                  <div class="panel-body Leave-Application-table-inner-box">
                                    <div class="box-body">
                                      <table class="table table-lg table-hover">
                                        <thead>
                                          <tr>
                                            <th>Att Date</th>
                                            <th>Att Type</th>
                                            <th>Checkin Time</th>
                                            <th>Checkout Time</th>
                                            <th>Work Hrs</th>
                                            <th>Overtime Work Hrs</th>
                                          </tr>
                                        </thead>

                                        <tbody>
                                          <ng-container *ngFor="let ipd of innerPanelData; let j=index;">
                                            <tr>
                                              <td>
                                                <div class="punchin-Button-job-company-box">
                                                  <strong>{{ipd.att_date}} </strong>
                                                </div>
                                              </td>
                                              <td>
                                                <div class="punchin-Button-job-company-box">
                                                  <strong>{{ipd.attendance_type}} <span *ngIf="ipd.leavetype">{{ipd.leavetype}}</span></strong>
                                                </div>
                                              </td>
                                              <td>{{ipd.firstcheckintime}}</td>
                                              <td>{{ipd.lastcheckouttime}}</td>
                                              <td>{{ipd.no_of_hours_worked}}</td>
                                              <td>{{ipd.no_of_overtime_hours_worked}} </td>

                                            </tr>
                                          </ng-container>
                                        </tbody>

                                        <tfoot style="display:none;">
                                          <tr></tr>
                                        </tfoot>
                                      </table>

                                    </div>
                                  </div>
                                </div>
                              </td>
                            </tr>

                          </ng-container>
                        </tbody>
                        <!-- <tfoot>
                          <tr>
                            <th colspan="12">Check-In: {{ this.tot_check_in}} </th>
                            <th colspan="12">Check-Out: {{ this.tot_check_out}} </th>
                            <th colspan="12">Total: {{ this.employee_data.length}} </th>
                          </tr>
                        </tfoot> -->
                        <tfoot>
                          <!-- <tr>
                            <th colspan="12">
                              <div style="display: flex; justify-content: space-between;">
                                <span>Check-In: {{ this.tot_check_in }}</span>
                                <span>Check-Out: {{ this.tot_check_out }}</span>
                                <span>Total: {{ this.employee_data.length }}</span>
                              </div>
                            </th>
                          </tr> -->
                        </tfoot>

                      </table>
                    </div>
                  </div>
                </div>
              </div>

            </div>
            <alert></alert>
          </div>


          <!-- Please Wait Loader -->
          <div *ngIf="loading || !(data)" class="overlay">
            <div class="please-wait">
              <i class="fa fa-spinner fa-spin fa-3x"></i>
              <b>Please wait...</b>
            </div>
          </div>
          <!-- Loader -->
        </div>
      </div>


    </div>

    <!-- Check-in Image Popup -->

    <div id="Check_in" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header theme-bg">
            <h4 class="modal-title">Check in Image</h4>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          </div>
          <div class="modal-body">
            <div class="row text-center">
              <img src="{{ pop_imgcheck_in_image_path }}" class="attachment-thumbnail large-image" alt="user-images"
                *ngIf="(pop_imgcheck_in_image_path != '' && pop_imgcheck_in_image_path != null)">
            </div>
          </div>


        </div>
      </div>
    </div>


    <!-- check-out Image Popup -->
    <div id="Check_out" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header theme-bg">
            <h4 class="modal-title">Check out Image</h4>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          </div>
          <div class="modal-body">
            <div class="row text-center">
              <img src="{{ pop_check_out_image_path }}" class="attachment-thumbnail large-image" alt="user-images"
                *ngIf="(pop_check_out_image_path != '' && pop_check_out_image_path != null)">
            </div>
          </div>


        </div>
      </div>
    </div>

  </div>

</section>

<app-footer></app-footer>




<!-----Sidebar Filter---->
<div id="sidebar" class="sidebar bg-dark text-white sidebar-menu_filter-box">
  <h3 class="filter-menu-header-text-box">Filter</h3>
  <!-- <button type="button" class="btn btn-user1 btn-round" (click)="resetFilter()">Clear</button>-->
  <a class="clear-box-btn" title="Clear Filter" (click)="resetFilter()">Clear</a>
  <button class="close-btn btn btn-danger1" (click)="closeSidebar()"><i class="fa fa-close"></i></button>
  <div class="sidebar-content-box">

    <div class="col-md-12 col-sm-12">
      <!-- <input type="text" [(ngModel)]="search_key_copy" placeholder="Search with employee(s)"
        class="form-control wide-width" style="width: 100%;" maxlength="200"> -->
    </div>

    <div class="col-md-12 ">

      <div id="filterComponent">
        <div class="panel-group">

          <div class="panel panel-default">
            <div class="panel-heading panel_heading_gray  card-header" role="tab" id="headingOne2"
              data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo" aria-expanded="false"
              aria-controls="collapse2">
              <h4>Filters <i class="fa fa-angle-down"></i></h4>
            </div>
            <div id="collapseTwo" class="panel-collapse collapse card-body in" role="tabpane2">
              <div class="row">
                <div class="col-sm-12">


                  <!--
                  <div class="form-group">
                    <label class="control-label col-sm-12">Attendance Status</label>
                    <div class="col-sm-12 padd-0">
                      <select class="form-control" [(ngModel)]="status_filter_copy"
                        [ngModelOptions]="{standalone: true}">
                        <option value="all">All</option>
                        <option value="present">Present</option>
                        <option value="absent">Absent</option>
                        <option value="leave">Leave</option>
                        <option value="overtime">Overtime</option>
                      </select>
                    </div>
                  </div> -->

                  <div class="form-group">
                    <span>Month-Year</span>
                    <p style="display: inline-flex;">
                      <select class="form-control" [(ngModel)]="month_copy" style="width: 15rem;">
                        <option *ngFor="let ma of monthsArray" [selected]="month==ma.id" [value]="ma.id">{{ma.month}}
                        </option>
                      </select>
                      <select class="form-control" [(ngModel)]="year_copy">
                        <option *ngFor="let ya of yearsArray" [selected]="year==ya" [value]="ya">{{ya}}</option>

                      </select>
                    </p>

                  </div>


                  <!-- <div class="form-group">
                    <label class="control-label col-sm-12">Status</label>
                    <div class="col-sm-12 padd-0">
                      <select class="form-control" [(ngModel)]="status_filter_copy">
                        <option value="">All</option>
                        <option value="Unmarked">Yet to Mark</option>
                        <option value="Pending">Marked</option>
                        <option value="Approved">Verified</option>
                      </select>
                    </div>
                  </div> -->



                  <div class="form-group">
                    <label class="control-label col-sm-12">Organization Unit</label>
                    <div class="col-sm-12 padd-0 userOrgUnit">

                      <ng-multiselect-dropdown [placeholder]="'Select Organization Units'" [settings]="dropdownSettings"
                        [data]="orgList" [(ngModel)]="orgName_copy" [ngModelOptions]="{standalone: true}">
                      </ng-multiselect-dropdown>
                      <!-- (onFilterChange)="getOrgUnitData()" -->

                    </div>
                  </div>

                  <div class="form-group">
                    <label class="control-label col-sm-12">Department</label>
                    <div class="col-sm-12 padd-0 userOrgUnit">

                      <ng-multiselect-dropdown [placeholder]="'Select Department'" [settings]="deptDropdownSettings"
                        [data]="deptList" [(ngModel)]="deptName_copy" [ngModelOptions]="{standalone: true}">
                      </ng-multiselect-dropdown>

                    </div>
                  </div>

                  <div class="form-group">
                    <label class="control-label col-sm-12">Designation</label>
                    <div class="col-sm-12 padd-0 userOrgUnit">

                      <ng-multiselect-dropdown [placeholder]="'Select Designation'" [settings]="desgDropdownSettings"
                        [data]="desgList" [(ngModel)]="desgName_copy" [ngModelOptions]="{standalone: true}">
                      </ng-multiselect-dropdown>
                    </div>
                  </div>


                </div>

              </div>
            </div>
          </div>



        </div>
      </div>

      <div class="text-center mrg-bot-25">
        <button type="button" class="btn btn-user1 btn-round btn-primary" (click)="change_sidebar_filter()"
          id="btnSetFilter">
          &nbsp;Apply</button>

      </div>
    </div>
  </div>
</div>
<!-----Sidebar Filter---->
