<app-sidebar (toggleEmitter)="toggle()"></app-sidebar>
<section>
  <div id="wrapper" [ngClass]="{'active': showSidebar}">
    <div id="page-wrapper" style="min-height: 596px;">
      <div class="row page-titles">
        <div class="col-md-5 align-self-center">
          <h3 class="text-themecolor">In Time/Out Time Details Report</h3>
        </div>
        <div class="col-md-7 align-self-center">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a [routerLink]="['/reports']">Reports</a></li>

            <li class="breadcrumb-item active">In Time/Out Time Details Report</li>
          </ol>
        </div>
      </div>
      <div class="container-fluid element" id="element">
        <!-- /row -->
        <div class="row">

          <div class="col-md-12 mrg-top-0 mrg-bot-25">
            <div class="card">
              <div class="card-header">
                <div class="row" style="align-items: center; display: flex;">

                  <div class="col-md-2 col-sm-2">
                    <span>Month-Year</span>
                  </div>
                  <div class="col-md-3 col-sm-3">
                    <span>&nbsp;</span>
                    <!-- (change)="changeMonth($event)"  (change)="changeYear($event)"-->
                    <p style="display: inline-flex;">
                      <select class="form-control" [(ngModel)]="month" (change)="changeMonth($event)"
                        style="width: 20rem;">
                        <!-- <option value="">Select</option> -->
                        <option *ngFor="let ma of monthsArray" [selected]="month==ma.id" [value]="ma.id">{{ma.month}}
                        </option>
                      </select>
                      <select class="form-control" [(ngModel)]="year" (change)="changeYear($event)"
                        style="margin-left: 10px;">
                        <h1>{{month}} | {{year}}</h1>
                        <!-- <option value="">Select</option> -->
                        <option *ngFor="let ya of yearsArray" [selected]="year==ya" [value]="ya">{{ya}}</option>

                      </select>
                    </p>

                  </div>

                  <div class="col-md-1 col-sm-1" style="display:none;">
                    <button class="btn btn-primary" style=" padding: 10px;">Search</button>
                  </div>

                  <div class="col-md-2 col-sm-2">
                    Total Records: {{(this.dayswisecheckinReportData?.length/3) || 0}}
                  </div>
                  <div class="col-md-2 col-sm-2" *ngIf="istToGermanTimeService.checkIfGermanTimeZone()">
                    <div class="form-check-inline">
                      <input id="ist" type="radio" [(ngModel)]="showGermanTime" [ngModelOptions]="{standalone: true}" name="timezone" value="IST"
                        class="form-check-input" (change)="onTimezoneChange()">
                      <label for="ist" class="form-check-label">IST</label>
                    </div>
                    <div class="form-check-inline">
                      <input id="cet" type="radio" [(ngModel)]="showGermanTime" [ngModelOptions]="{standalone: true}" name="timezone" value="CET"
                        class="form-check-input" (change)="onTimezoneChange()">
                      <label for="cet" class="form-check-label">CET/CEST</label>
                    </div>
                  </div>

                  <!--<div  class="col-md-4" style="margin-top: 1.2rem !important;"><span > Check-In : <b > 0</b></span> | <span > Check-Out :<b > 0</b></span> | <span > Total : <b >9 </b></span></div>-->

                  <div class="col-md-2 col-sm-2">
                    <div class="Show-Fields-top-outer-box" style="float: right;">
                      <div class="dropdown float-right-box">
                        <ul role="tablist" class="nav nav-pills">
                          <li role="presentation" class="dropdown"><a id="drop6" data-toggle="dropdown" role="button"
                              aria-haspopup="true" class="dropdown-toggle btn btn-user1 btn-round btn-primary">Export
                              as <span class="caret"></span></a>
                            <ul id="menu3" aria-labelledby="drop6" class="dropdown-menu">
                              <li><a style="cursor: pointer;" (click)="getAttExcel()"> XLSX (Microsoft Excel)</a>
                              </li>
                            </ul>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-2 col-sm-2">
                    <a (click)="openSidebar()" class="btn excel-btn-box results filter-onlick-btn"
                      style="padding-top: 9px;float:right;margin-right: 2rem;">Search<i class="fa fa-filter"
                        style="margin-left: 5px;"></i></a>
                  </div>


                </div>
              </div>

              <div class="card-body padd-bot-0 padd-top-0">


                <div class="row">

                  <div class="col-md-12 padd-top-0">

                    <div class="table-responsive bulk-attendance-outer-box Reimbursements-outer-box"
                      id="leaveBalanceReport">

                      <table class="table table-hover table_fixed" id="leaveSummaryReportTable">
                        <thead id="leaveSummaryReportHead">
                          <tr class="ZPLHRow">
                            <th *ngIf="showSelectionCheckboxes">
                              <input class="form-check-input" type="checkbox" id="selectAll" [(ngModel)]="selectAll"
                                (change)="toggleSelectAll()">
                            </th>
                            <th class="text-center">
                              <div><span>Employee Name</span></div>
                            </th>
                            <th class=" text-center">
                              <div><span>Designation</span></div>
                            </th>
                            <th class=" text-center">
                              <div><span>Date</span></div>
                            </th>
                            <th *ngFor="let dd of month_days_master;"
                              [ngStyle]="{'color': ((dd.dayname.toUpperCase()) == 'SUN' || (dd.dayname.toUpperCase()) =='SAT') ? 'red': ''}"
                              class="text-center">

                              <span class="DB MB3">
                                <!-- {{getShortMonthName(month)}} -->
                                {{dd.day_cnt}}</span> <br>
                              <!-- <span class="DB dgry ZPreg"> {{dd.dayname}}</span> -->

                            </th>


                          </tr>
                        </thead>
                        <tbody id="leaveSummaryReportBody">
                          <ng-container *ngFor="let dw of dayswisecheckinReportData; let i=index;">
                            <tr class="ZPLRow Report_row" [class.selected-row]="dw.selected">

                              <td *ngIf="showSelectionCheckboxes">
                                <input type="checkbox" [(ngModel)]="dw.selected"
                                  (change)="onEmployeeCheckboxChange(dw.emp_code)"
                                  *ngIf="dw.tblrowtype === 'Check In' && dw.emp_name !== 'Grand Total'">
                              </td>

                              <td class="TBrdr-Rgt">
                                <ng-container *ngIf="i%3==0">
                                  <b>{{ dw.emp_name }} ({{dw?.tpcode || dw?.orgempcode || ''}})</b>
                                </ng-container>
                              </td>
                              <td class="TBrdr-Rgt">
                                <ng-container *ngIf="i%3==0">
                                  <b>{{ dw.designation }}</b>
                                </ng-container>
                              </td>
                              <td class="TBrdr-Rgt">
                                <ng-container>
                                  <b>{{ dw.tblrowtype }}</b>
                                </ng-container>
                              </td>


                             <td *ngFor="let dd of month_days_master;" class="TBrdr-Rgt"
                                [ngStyle]="{'font-weight': (i+1)%3 == 0 ? 'bold' : ''}">
                                <ng-container *ngIf="showGermanTime=='IST' || (i+1)%3 == 0">
                                  {{ dw['day' + dd.day_cnt] }}
                                </ng-container>
                                <ng-container *ngIf="showGermanTime=='CET' && (i+1)%3 != 0">
                                  {{ getGermanTime(dw['day' + dd.day_cnt], dd.w_date) }}
                                </ng-container>
                              </td>
                            </tr>
                          </ng-container>
                        </tbody>

                      </table>



                    </div>

                  </div>




                </div>
              </div>
            </div>


          </div>




        </div>


      </div>
    </div>
  </div>
</section>




<!-----Sidebar Filter---->
<div id="sidebar" class="sidebar bg-dark text-white sidebar-menu_filter-box">
  <h3 class="filter-menu-header-text-box">Filter</h3>
  <!-- <button type="button" class="btn btn-user1 btn-round" (click)="resetFilter()">Clear</button>-->
  <a class="clear-box-btn" title="Clear Filter" (click)="resetFilter()">Clear</a>
  <button class="close-btn btn btn-danger1" (click)="closeSidebar()"><i class="fa fa-close"></i></button>
  <div class="sidebar-content-box">

    <div class="col-md-12 col-sm-12">
      <input type="text" [(ngModel)]="search_key_copy" placeholder="Search with employee(s)"
        class="form-control wide-width" style="width: 100%;" maxlength="200">
    </div>

    <div class="col-md-12 ">

      <div id="filterComponent">
        <div class="panel-group">

          <div class="panel panel-default">
            <div class="panel-heading panel_heading_gray  card-header" role="tab" id="headingOne2"
              data-toggle="collapse" data-parent="#accordion2" href="#collapseOne2" aria-expanded="false"
              aria-controls="collapseOne">
              <h4>In/Out Time Filter <i class="fa fa-angle-down"></i></h4>
            </div>
            <div id="collapseOne2" class="panel-collapse collapse card-body in" role="tabpane2">
              <div class="row">
                <div class="col-sm-12">


                  <div class="form-group">
                    <span>Month-Year</span>
                    <!-- (change)="changeMonth($event)"  (change)="changeYear($event)"-->
                    <p style="display: inline-flex;">
                      <select class="form-control" [(ngModel)]="month_copy" style="width: 15rem;">
                        <!-- <option value="">Select</option> -->
                        <option *ngFor="let ma of monthsArray" [selected]="month==ma.id" [value]="ma.id">{{ma.month}}
                        </option>
                      </select>
                      <select class="form-control" [(ngModel)]="year_copy">
                        <!-- <option value="">Select</option> -->
                        <option *ngFor="let ya of yearsArray" [selected]="year==ya" [value]="ya">{{ya}}</option>

                      </select>
                    </p>

                  </div>


                  <!--*ngIf="decoded_token.isEmployer=='1'"-->
                  <div class="form-group">
                    <label class="control-label col-sm-12">Organization Unit</label>
                    <div class="col-sm-12 padd-0 userOrgUnit">

                      <ng-multiselect-dropdown [placeholder]="'Select Organization Units'" [settings]="dropdownSettings"
                        [data]="orgList" [(ngModel)]="orgName_copy" [ngModelOptions]="{standalone: true}">
                      </ng-multiselect-dropdown>
                      <!-- (onFilterChange)="getOrgUnitData()" -->

                    </div>
                  </div>

                  <div class="form-group">
                    <label class="control-label col-sm-12">Department</label>
                    <div class="col-sm-12 padd-0 userOrgUnit">

                      <ng-multiselect-dropdown [placeholder]="'Select Department'" [settings]="deptDropdownSettings"
                        [data]="deptList" [(ngModel)]="deptName_copy" [ngModelOptions]="{standalone: true}">
                      </ng-multiselect-dropdown>

                    </div>
                  </div>

                  <div class="form-group">
                    <label class="control-label col-sm-12">Designation</label>
                    <div class="col-sm-12 padd-0 userOrgUnit">

                      <ng-multiselect-dropdown [placeholder]="'Select Designation'" [settings]="desgDropdownSettings"
                        [data]="desgList" [(ngModel)]="desgName_copy" [ngModelOptions]="{standalone: true}">
                      </ng-multiselect-dropdown>
                    </div>
                  </div>





                </div>

              </div>
            </div>
          </div>



        </div>
      </div>

      <div class="text-center mrg-bot-25">
        <button type="button" class="btn btn-user1 btn-round btn-primary" (click)="change_sidebar_filter()"
          id="btnSetFilter">
          &nbsp;Apply</button>

      </div>
    </div>
  </div>
</div>
<!-----Sidebar Filter---->