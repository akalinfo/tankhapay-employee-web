<app-sidebar (toggleEmitter)="toggle()"></app-sidebar>
<section>
    <div id="wrapper" [ngClass]="{'active': showSidebar == false}">
        <div class="fakeLoader"></div>


        <div id="page-wrapper">


            <div class="row page-titles">
                <div class="col-md-5 align-self-center">
                    <h3 class="text-themecolor">Disbursement Report</h3>
                </div>
                <div class="col-md-7 align-self-center">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a [routerLink]="['/reports']">Reports</a></li>
                        <li class="breadcrumb-item active">Disbursement Report</li>
                    </ol>
                </div>
            </div>

            <div class="container-fluid">

                <div class="row">
                    <app-common-filter [extraFilters]="addOnFilters" [isSideBar]="isSideBar"
                        (filterChanged)="searchOnFilters($event)"></app-common-filter>

                    <div class="col-md-12 col-sm-12">

                        <div class="card">
                            <div class="card-header">
                                <div class="row">
                                    <div class="col-md-12 padd-0">
                                        <div class="top-right-outer-box filter-outer-main-box">
                                            <!-- <div class="col-md-4" [hidden]="radio_button_value === 'DisbursementSummary'" style="float: right;">
                                            <input type="text" value="" placeholder="Search Employee(s)"
                                                class="form-control wide-width" style="width: 100%;"
                                                (keyup)="search($event)" />
                                        </div> -->
                                            <div class="col-md-6"
                                                *ngIf="this.radio_button_value == 'DisbursementDetails';  else elseBlock">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox"
                                                        id="flexCheckDefault" [(ngModel)]="includeEmployeeDetails"
                                                        (click)="toggleShowFields()">
                                                    <label class="form-check-label" for="flexCheckDefault">
                                                        Include Employee Details
                                                    </label>

                                                </div>
                                            </div>

                                            <ng-template #elseBlock>
                                                <div class="col-md-8">
                                                </div>
                                            </ng-template>
                                            <div class="col-md-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="showRoundedVal"
                                                        [(ngModel)]="isShowRoundedVal" />
                                                    <label class="form-check-label" for="showRoundedVal">&nbsp; 
                                                        Show rounded values
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="Show-Fields-top-outer-box" style="margin-left: 10px;">
                                                    <div class="dropdown float-right-box">
                                                        <a *ngIf="this.radio_button_value == 'DisbursementDetails'"
                                                            class="btn btn-round btn-success excel-btn-box"
                                                            style="padding-top: 9px;" (click)="SaveColumnValues()"
                                                            title="Click to save reports"> <i
                                                                class="fa fa-save"></i></a>&nbsp;

                                                        <a class="btn btn-round btn-success excel-btn-box"
                                                            style="margin-left: 2px;padding-top: 9px;"
                                                            (click)="exportToExcelTable()">&nbsp;<i
                                                                class="fa fa-file-excel-o" aria-hidden="true"></i></a>

                                                        <a class="btn btn-round btn-success excel-btn-box"
                                                            style="color: red;margin-left: 2px;padding-top: 9px;"
                                                            (click)="exportToPdf('Disbursement-report.pdf','Disbursement Report')">&nbsp;<i
                                                                class="fa fa-file-pdf-o" aria-hidden="true"></i></a>
                                                    </div>


                                                    <div *ngIf="this.radio_button_value == 'DisbursementDetails'"
                                                        class="dropdown btn-group Show-Fields-outer-box"
                                                        style="margin-left: 10px;">
                                                        <button type="button" id="dropdownMenuButton"
                                                            data-toggle="dropdown" aria-haspopup="true"
                                                            aria-expanded="false"
                                                            class="btn btn-primary dropdown-toggle"> Show Fields <span
                                                                class="caret"></span></button>

                                                        <ul class="dropdown-menu showhide"
                                                            aria-labelledby="dropdownMenuButton"
                                                            style="overflow-y: auto; margin-left: -13rem;max-height: 300px;">
                                                            <li *ngFor="let fields of fieldarray; let i = index">
                                                                <a class="dropdown-item"
                                                                    (click)="$event.stopPropagation()">
                                                                    <label>
                                                                        <input type="checkbox"
                                                                            (click)="hideshowfields($event,fields)"
                                                                            [checked]="showfields[fields.value] ? true : null">
                                                                        <span
                                                                            style="font-size: small;">{{fields.name}}</span>
                                                                    </label>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">



                                </div>
                            </div>
                            <!-- Summary table -->
                            <div class="card-body" *ngIf="this.radio_button_value == 'DisbursementSummary'">
                                <!-- <div class="container"> -->
                                <!-- *ngIf="data_summary.length>0" -->
                                <div class="col-lg-12 col-md-12 col-sm-12 padd-0">
                                    <div class="table-responsive reports-table-outer-box reports-new-table-outer-box">
                                        <table class="table table-striped table-bordered">
                                            <thead style="background: skyblue;" #reportTable>
                                                <tr>
                                                    <th>S.No</th>
                                                    <th>Month</th>
                                                    <!-- <th *ngIf="includeEmployeeDetails || showfields['basic']">Basic</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['hra']">HRA</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['conv']">CONV</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['medical']">Medical</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['specialallowance']">Special Allowance</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['arr_basic']">Arr Basic</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['arr_hra']">Arr HRA</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['arr_conv']">Arr CONV</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['arr_medical']">Arr Medical</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['arr_specialallowance']">Arr Special Allowance</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['incentive']">Incentive</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['refund']">Refund</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['monthly_bonus']">Monthly Bonus</th> -->
                                                    <th>Gross Earning</th>
                                                    <!-- <th *ngIf="includeEmployeeDetails || showfields['epf']">EPF</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['vpf']">VPF</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['esi']">ESI</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['tds']">TDS</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['lwf']">LWF</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['insurance']">Insurance</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['mobile']">Mobile</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['other']">Other</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['loan']">Loan</th> -->
                                                    <th>Advance</th>
                                                    <th>Advance Recovery</th>

                                                    <!-- <th *ngIf="includeEmployeeDetails || showfields['professionaltax']">Professional Tax</th> -->
                                                    <th>Gross Deduction</th>
                                                    <th>Net Pay</th>
                                                    <th>CTC</th>
                                                    <!-- <th *ngIf="includeEmployeeDetails || showfields['ac_1']">A/c No.1</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['ac_10']">A/c No.10</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['ac_2']">A/c No.2</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['ac21']">A/c No.21</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['employer_esi_contr']">Employer ESI Contr</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['lwf_employer']">Employer LWF</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['totalarear']">Total Arrear</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['voucher_amount']">Voucher Amount</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['ews']">EWS</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['gratuity']">Gratuity</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['bonus']">Bonus</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['employeenps']">Employee NPS</th> -->
                                                </tr>
                                            </thead>
                                            <tbody style="background: aliceblue;">
                                                <ng-container *ngFor="let report of filteredEmployees;let i=index;">
                                                    <tr [ngClass]="{'light-skyblue': i % 2 == 0, 'white': i % 2 != 0}">
                                                        <td>{{i+1}}</td>
                                                        <td>{{report.mon}}</td>
                                                        <!-- <td *ngIf="includeEmployeeDetails || showfields['basic']">{{report.basic | number:'1.0-0'}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['hra']">{{report.hra}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['conv']">{{report.conv}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['medical']">{{report.medical}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['specialallowance']">{{report.specialallowance}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['arr_basic']">{{report.arr_basic}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['arr_hra']">{{report.arr_hra}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['arr_conv']">{{report.arr_conv}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['arr_medical']">{{report.arr_medical}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['arr_specialallowance']">{{report.arr_specialallowance}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['incentive']">{{report.incentive}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['refund']">{{report.refund}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['monthly_bonus']">{{report.monthly_bonus}}</td> -->
                                                        <td>{{!isShowRoundedVal ?
                                                            truncateToTwoDecimals(report.gross_earning) :
                                                            getRoundedVal(report.gross_earning)
                                                            }}</td>
                                                        <!-- <td *ngIf="includeEmployeeDetails || showfields['epf']">{{report.epf | number: '1.2-2'}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['vpf']">{{report.vpf}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['esi']">{{report.esi}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['tds']">{{report.tds}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['lwf']">{{report.lwf}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['insurance']">{{report.insurance}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['mobile']">{{report.mobile}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['other']">{{report.other}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['loan']">{{report.loan}}</td> -->
                                                        <td>{{!isShowRoundedVal ?
                                                            truncateToTwoDecimals(report.advance) :
                                                            getRoundedVal(report.advance)
                                                            }}</td>
                                                        <td>{{!isShowRoundedVal ?
                                                            truncateToTwoDecimals(report.advancerecovery) :
                                                            getRoundedVal(report.advancerecovery)
                                                            }}</td>

                                                        <!-- <td *ngIf="includeEmployeeDetails || showfields['professionaltax']">{{report.professionaltax}}</td> -->
                                                        <td>{{!isShowRoundedVal ?
                                                            truncateToTwoDecimals(report.gross_deduction) :
                                                            getRoundedVal(report.gross_deduction)
                                                            }}</td>

                                                        <td>{{!isShowRoundedVal ?
                                                            truncateToTwoDecimals(report.netpay) :
                                                            getRoundedVal(report.netpay)
                                                            }}</td>
                                                        <!-- <td *ngIf="includeEmployeeDetails || showfields['ac_1']">{{report.ac_1 | number: '1.2-2'}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['ac_10']">{{report.ac_10 | number: '1.2-2'}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['ac_2']">{{report.ac_2 | number: '1.2-2'}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['ac21']">{{report.ac21 | number: '1.2-2'}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['employer_esi_contr']">{{report.employer_esi_contr}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['lwf_employer']">{{report.lwf_employer}}</td>

                                                            <td *ngIf="includeEmployeeDetails || showfields['totalarear']">{{report.totalarear}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['voucher_amount']">{{report.voucher_amount}}</td>

                                                            <td *ngIf="includeEmployeeDetails || showfields['ews']">{{report.ews}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['gratuity']">{{report.gratuity}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['bonus']">{{report.bonus}}</td>

                                                            <td *ngIf="includeEmployeeDetails || showfields['employeenps']">{{report.employeenps}}</td> -->
                                                        <td>{{!isShowRoundedVal ?
                                                            truncateToTwoDecimals(report.monthctc) :
                                                            getRoundedVal(report.monthctc)
                                                            }}</td>
                                                    </tr>
                                                </ng-container>
                                            </tbody>
                                        </table>
                                        <alert></alert>
                                    </div>
                                </div>
                                <!-- </div> -->
                            </div>

                            <!-- Details Table *ngIf="this.radio_button_value == 'DisbursementDetails'"-->
                            <div class="card-body" *ngIf="this.radio_button_value == 'DisbursementDetails'">
                                <!-- <div class="container"> -->
                                <div class="col-lg-12 col-md-12 col-sm-12 padd-0">
                                    <div
                                        class="table-responsive reports-table-outer-box reports-new-table-outer-box reports-new-table-outer-box">
                                       <table *ngIf="data_summary.length>0" class="table table-striped table-bordered" id="reportTable" #reportTable>
                                            <thead style="background: skyblue;">
                                                <tr>
                                                     <!-- Basic Info ------------------------------------------------>
                                                    <th *ngIf="includeEmployeeDetails || showfields['S_No']">S.No</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['mon']">Month</th>
                                                    <th>TP / Org Emp Code</th>
                                                    <th>Employee Name</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['email']">Email ID</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['fathername']"> Father/Husband Name </th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['dateofbirth']">Date Of Birth</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['dateofjoining']"> Date of Joining</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['dateofleaving']">Date of Leaving</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['unitparametername']">Unit Parameter Name</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['posting_department']"> Department</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['designation']">Designation</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['jobtype']">Job Type</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['pan_number']">Pan Number</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['uannumber']">UAN</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['esinumber']">ESI Number</th>
                                                    <th>Bank Account</th>
                                                    <th>IFSC Code</th>
                                                    <th>Bank Name</th>
                                                    <th>Branch</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['total_paid_days']"> Total Paid Days</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['loss_off_pay']"> Loss of Pay</th>
                                                 
                                                     <!-- Rate fields --------------------------------------->
                                                    <th *ngIf="includeEmployeeDetails || showfields['ratebasic']">Rate Basic</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['ratehra']">Rate HRA</th>
                                                    <!-- <th *ngIf="includeEmployeeDetails || showfields['rateconv']">Rate CONV</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['ratemedical']">Rate Medical</th> -->
                                                    <th *ngIf="includeEmployeeDetails || showfields['ratespecialallowance']">
                                                        Rate Special Allowance</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['fixedallowancestotalrate']">
                                                        Fixed Allowances Total Rate
                                                    </th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['monthctc']">CTC </th>
               

                                                    <!-- Arrear fields---------------------------------------------------- -->
                                                    <th *ngIf="includeEmployeeDetails || showfields['arr_basic']">Arr Basic</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['arr_hra']">Arr HRA </th>
                                                    <!-- <th *ngIf="includeEmployeeDetails || showfields['arr_conv']">Arr CONV</th>
                                                        <th *ngIf="includeEmployeeDetails || showfields['arr_medical']">Arr Medical</th> -->
                                                         <th *ngIf="includeEmployeeDetails || showfields['arrear_days']"> Arrear Days</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['arr_specialallowance']">Arr Special Allowance</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['arearaddedmonths']"> Arrear Months</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['totalarear']">Total Arrear</th>


                                                    <!-- Earnings and Allowances -------------------------------------------->
                                                    <th *ngIf="includeEmployeeDetails || showfields['basic']">Basic</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['hra']">HRA</th>
                                                    <!-- <th *ngIf="includeEmployeeDetails || showfields['conv']">CONV</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['medical']">Medical</th> -->
                                                    <th *ngIf="includeEmployeeDetails || showfields['specialallowance']"> Special Allowance</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['incentive']">Incentive</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['refund']">Refund </th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['salarystatus']"> Salary Status</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['monthly_bonus']">Monthly Bonus</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['voucher_amount']"> Voucher Amount</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['ews']">EWS</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['gratuity']">  Gratuity</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['bonus']">Bonus</th>
                                                    <th *ngIf="(includeEmployeeDetails || showfields['tea_allowance']) && (isValueGreaterThanZero('tea_allowance'))">
                                                        Tea Allowance
                                                    </th>
                                                    <th>Gross Earning</th>


                                                    <!-- Deductions -------------------------------------------------------->
                                                    <th *ngIf="includeEmployeeDetails || showfields['epf']">EPF</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['vpf']">VPF</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['esi']">ESI</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['tds']">TDS</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['lwf']">LWF</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['insurance']">Insurance</th>
                                                    <!-- <th *ngIf="includeEmployeeDetails || showfields['mobile']">Mobile</th> -->
                                                    <th *ngIf="includeEmployeeDetails || showfields['other']">Other</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['loan']">Loan</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['loanrecovery']"> Loan Recovery</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['advance']">Advance</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['advancerecovery']"> Advance Recovery</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['professionaltax']">Professional Tax</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['charity_contribution']">Charity Contribution</th>
                                                    <th>Gross Deduction</th>
                                                    
                                                    <th *ngIf="includeEmployeeDetails || showfields['ac_1']">A/c No.1</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['ac_10']">A/c No.10 </th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['ac_2']">A/c No.2 </th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['ac21']">A/c No.21 </th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['employer_esi_contr']"> Employer ESI Contr</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['lwf_employer']"> Employer LWF</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['employeenps']"> Employee NPS</th>
                                                    <th *ngIf="includeEmployeeDetails || showfields['insurancetype']"> Insurance Excluded From CTC</th>
                                                    <th>Net Pay</th>
                                                    
                                                </tr>
                                            </thead>
                                            <tbody style="background: aliceblue;">
                                                <ng-container *ngFor="let report of filteredEmployees;let i=index;">
                                                    <tr [ngClass]="{'light-skyblue': i % 2 == 0, 'white': i % 2 != 0}">
                                                        <td *ngIf="includeEmployeeDetails || showfields['S_No']">{{i+1}}
                                                        </td>

                                                        <td *ngIf="includeEmployeeDetails || showfields['mon']">
                                                            {{report.mon}}</td>
                                                        <td> {{ (report.orgempcode !== '' && report.orgempcode != null
                                                            && report.orgempcode != undefined) ? report.orgempcode :
                                                            report.tpcode }}</td>
                                                        <td>{{report.empname}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['email']">
                                                            {{report.email}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['fathername']">
                                                            {{report.fathername}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['dateofbirth']">
                                                            {{report.dateofbirth}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['dateofjoining']">
                                                            {{report.dateofjoining}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['dateofleaving']">
                                                            {{report.dateofleaving}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['unitparametername']">
                                                            {{report.unitparametername}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['posting_department']">
                                                            {{report.posting_department}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['designation']">
                                                            {{report.designation}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['jobtype']">
                                                            {{report.jobtype}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['pan_number']">
                                                            {{report.pan_number}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['uannumber']">
                                                            {{report.uannumber}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['esinumber']">
                                                            {{report.esinumber}}</td>
                                                        <td>{{report.bankaccountno}}</td>
                                                        <td>{{report.ifsccode}}</td>
                                                        <td>{{report.bankname}}</td>
                                                        <td>{{report.bankbranch}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['total_paid_days']">
                                                            {{report.total_paid_days}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['loss_off_pay']">
                                                            {{report.loss_off_pay}}</td>

                                                        <!-- Rate fields ---------------------------------------------->
                                                        <td *ngIf="includeEmployeeDetails || showfields['ratebasic']">
                                                            {{!isShowRoundedVal ?
                                                            truncateToTwoDecimals(report.ratebasic) :
                                                            getRoundedVal(report.ratebasic)
                                                            }} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['ratehra']">
                                                            {{!isShowRoundedVal ? truncateToTwoDecimals(report.ratehra) : getRoundedVal(report.ratehra)}}</td>
                                                        <!-- <td *ngIf="includeEmployeeDetails || showfields['rateconv']">{{report.rateconv}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['ratemedical']">{{report.ratemedical}}</td> -->
                                                        <td *ngIf="includeEmployeeDetails || showfields['ratespecial_allowance']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.ratespecial_allowance) :
                                                            getRoundedVal(report.ratespecial_allowance)}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['fixedallowancestotalrate']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.fixedallowancestotalrate) :
                                                            getRoundedVal(report.fixedallowancestotalrate)}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['monthctc']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.monthctc):
                                                            getRoundedVal(report.monthctc)}} </td>

                                                      
                                                        <!-- Arrear fields------------------------------------------------------>
                                                        <td *ngIf="includeEmployeeDetails || showfields['arr_basic']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.arr_basic) : getRoundedVal(report.arr_basic)}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['arr_hra']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.arr_hra) : getRoundedVal(report.arr_hra)}}</td>
                                                        <!-- <td *ngIf="includeEmployeeDetails || showfields['arr_conv']">{{report.arr_conv}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['arr_medical']">{{report.arr_medical}}</td> -->
                                                        <td *ngIf="includeEmployeeDetails || showfields['arrear_days']">
                                                            {{report.arrear_days}}</td>
                                                        <td
                                                            *ngIf="includeEmployeeDetails || showfields['arr_specialallowance']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.arr_specialallowance) :
                                                            getRoundedVal(report.arr_specialallowance)}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['arearaddedmonths']">
                                                            {{report.arearaddedmonths}}</td>

                                                        <td *ngIf="includeEmployeeDetails || showfields['totalarear']">
                                                            {{!isShowRoundedVal ? truncateToTwoDecimals(report.totalarear) : getRoundedVal(report.totalarear)}}
                                                        </td>

                                                         
                                                        <!-- Earnings and Allowances -------------------------------------------->
                                                        <td *ngIf="includeEmployeeDetails || showfields['basic']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.basic) :
                                                            getRoundedVal(report.basic)}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['hra']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.hra) : getRoundedVal(report.hra)}}</td>
                                                        <!-- <td *ngIf="includeEmployeeDetails || showfields['conv']">{{report.conv}}</td>
                                                            <td *ngIf="includeEmployeeDetails || showfields['medical']">{{report.medical}}</td> -->
                                                        <td
                                                            *ngIf="includeEmployeeDetails || showfields['specialallowance']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.specialallowance) :
                                                            getRoundedVal(report.specialallowance)}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['incentive']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.incentive) : getRoundedVal(report.incentive)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['refund']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.refund) : getRoundedVal(report.refund)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['salarystatus']">
                                                            {{report.salarystatus}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['monthly_bonus']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.monthly_bonus) :
                                                            getRoundedVal(report.monthly_bonus)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['voucher_amount']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.voucher_amount) :
                                                            getRoundedVal(report.voucher_amount)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['ews']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.ews) : getRoundedVal(report.ews)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['gratuity']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.gratuity) : getRoundedVal(report.gratuity)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['bonus']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.bonus) : getRoundedVal(report.bonus)}} </td>
                                                        <td *ngIf="(includeEmployeeDetails || showfields['tea_allowance']) && (isValueGreaterThanZero('tea_allowance'))">
                                                            {{report.tea_allowance}}</td>
                                                        <td>{{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.gross_earning):
                                                            getRoundedVal(report.gross_earning)}} </td>

                                                        
                                                        <!-- Deductions ---------------------------------------------------------------->
                                                       
                                                        <td *ngIf="includeEmployeeDetails || showfields['epf']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.epf):
                                                            getRoundedVal(report.epf)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['vpf']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.vpf) : getRoundedVal(report.vpf)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['esi']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.esi) : getRoundedVal(report.esi)}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['tds']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.tds) : getRoundedVal(report.tds)}}</td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['lwf']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.lwf) : getRoundedVal(report.lwf)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['insurance']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.insurance) : getRoundedVal(report.insurance)}} </td>
                                                        <!-- <td *ngIf="includeEmployeeDetails || showfields['mobile']">{{report.mobile}}</td> -->
                                                        <td *ngIf="includeEmployeeDetails || showfields['other']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.other) : getRoundedVal(report.other)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['loan']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.loan) : getRoundedVal(report.loan)}} </td>
                                                        <td
                                                            *ngIf="includeEmployeeDetails || showfields['loanrecovery']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.loanrecovery) : getRoundedVal(report.loanrecovery)}}
                                                        </td>
                                                        <!-- loanrecovery -->
                                                        <td *ngIf="includeEmployeeDetails || showfields['advance']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.advance) : getRoundedVal(report.advance)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['advancerecovery']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.advancerecovery) :
                                                            getRoundedVal(report.advancerecovery)}} </td>
                                                        <td
                                                            *ngIf="includeEmployeeDetails || showfields['professionaltax']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.professionaltax) :
                                                            getRoundedVal(report.professionaltax)}} </td>
                                                        <!-- start - new param -->
                                                        <td
                                                            *ngIf="includeEmployeeDetails || showfields['charity_contribution']">
                                                            {{report.charity_contribution_amount}}</td>
                                                        <!-- end - new param -->
                                                        <td>{{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.gross_deduction) :
                                                            getRoundedVal(report.gross_deduction)}} </td>
                                                    
                                                        <td *ngIf="includeEmployeeDetails || showfields['ac_1']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.ac_1):
                                                            getRoundedVal(report.ac_1)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['ac_10']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.ac_10):
                                                            getRoundedVal(report.ac_10)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['ac_2']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.ac_2):
                                                            getRoundedVal(report.ac_2)}} </td>
                                                        <td *ngIf="includeEmployeeDetails || showfields['ac21']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.ac21):
                                                            getRoundedVal(report.ac21)}} </td>
                                                        <td
                                                            *ngIf="includeEmployeeDetails || showfields['employer_esi_contr']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.employer_esi_contr) :
                                                            getRoundedVal(report.employer_esi_contr)}} </td>
                                                        <td
                                                            *ngIf="includeEmployeeDetails || showfields['lwf_employer']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.lwf_employer) : getRoundedVal(report.lwf_employer)}}
                                                        </td>

                                                        <td *ngIf="includeEmployeeDetails || showfields['employeenps']">
                                                            {{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.employeenps) : getRoundedVal(report.employeenps)}}
                                                        </td>

                                                        <td
                                                            *ngIf="includeEmployeeDetails || showfields['insurancetype']">
                                                            {{report.insurancetype}}</td>
                                                        <td>{{!isShowRoundedVal
                                                            ? truncateToTwoDecimals(report.netpay):
                                                            getRoundedVal(report.netpay)}} </td>
                                                        
                                                    </tr>
                                                </ng-container>
                                            </tbody>
                                        </table>
                                        <alert></alert>
                                    </div>
                                </div>
                                <!-- </div> -->
                            </div>

                            <!-- <div class="col-lg-12 col-md-12 col-sm-12">
                                <div *ngIf="data.length == 0 && !show_label" class="alert alert-danger text-center">
                                    No Record Found.
                                </div>
                                <div *ngIf="data.length==0 && show_label" class="alert alert-success text-center">
                                    Please filter to view records.
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>





    <app-footer></app-footer>