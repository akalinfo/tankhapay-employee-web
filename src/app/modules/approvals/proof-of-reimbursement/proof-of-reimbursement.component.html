<app-sidebar (toggleEmitter)="toggle()"></app-sidebar>
<section>
  <div id="wrapper" [ngClass]="{'active': showSidebar == true}">
    <div class="fakeLoader"></div>

    <div id="page-wrapper">
      <div class="row page-titles">
        <div class="col-md-5 align-self-center">
          <h3 class="text-themecolor">Proof of Reimbursement</h3>
        </div>
        <div class="col-md-7 align-self-center">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a [routerLink]="['/dashboard']">Dashboard</a></li>

            <li class="breadcrumb-item active">Proof of Reimbursement</li>
          </ol>
        </div>
      </div>

      <div class="container-fluid">
        <!-- /row -->
        <div class="row">

          <div class="col-md-12 col-sm-12">
            <div class="card">

              <div class="card-header">
                <div class="row">
                  <form [formGroup]="Reimbursement_Form">
                    <div class="col-md-2" style="display: flex; align-items: center;">
                      <span style="margin: 1.5rem; font-weight: 500;" class="">Select Date:</span>
                    </div>

                    <div class="col-md-2">
                      <input id="FromDate2" #rd class="form-control" type="text" style="cursor: pointer;"
                        formControlName="FromDate" placeholder="dd-mm-yyyy" autocomplete="off" readonly>
                    </div>

                    <div class="col-md-2">
                      <input id="ToDate2" #rd class="form-control" type="text" style="cursor: pointer;"
                        formControlName="ToDate" placeholder="dd-mm-yyyy" autocomplete="off" readonly>
                    </div>
                    <div class="col-md-2" style="display: flex; align-items: center;">
                      <label style="margin: 1.5rem; font-weight: 500;" class="">Status:</label>
                    </div>
                    <div class="col-md-2">
                      <select id="statusSelect" class="form-control" formControlName="filterStatus"
                        (change)="onStatusChange($event)" [value]="selectedStatus">
                        <option *ngFor="let status of filterTypes" [value]="status.shortCode">
                          {{ status.Description }}
                        </option>
                      </select>
                    </div>
                    
                    <div class="col-md-2">
                      <button class="btn btn-primary" style=" padding: 10px;"
                        (click)="GetAllReimbursementClaims_ForEmployer()">Search</button>
                    </div>

                  </form>
                </div>

                <div class="row">
                  <div class="col-md-3">
                    <strong>Total Record(s): {{this.reimbursement_data.length}}</strong> 
                  </div>
                </div>
              </div>

              <div class="card-body">
                <div class="col-lg-12">
                  <div class="table-responsive bulk-attendance-outer-box Reimbursements-outer-box">

                    <div class="table-responsive">
                      <table class="table table-striped table-bordered" id="example">

                        <thead>
                          <tr>
                            <th>S.No</th>

                            <th>Employee Name</th>
                            <th>TP / Org Emp Code</th>
                            <th>Reimbursement Name</th>
                            <th>Expense Date</th>
                            <th>Expense Amount</th>
                            <th>Expense Description</th>
                            <th>Created Date</th>
                            <th>Document(s)</th>
                            <th>Expense Document Status</th>
                            <th>Reject Reason</th>
                            <th>Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <ng-container *ngFor="let report of reimbursement_data; let i = index">
                            <tr style='background:bgColor = "#fed8b1";'>
                              <td>{{i+1}}</td>

                              <td>{{report.emp_name}}</td>
                              <td>
                                {{ (report.org_emp_code !== '' && report.org_emp_code != null && report.org_emp_code !=
                                undefined) ? report.org_emp_code : report.tp_code }}
                              </td>
                              <td>{{report.reimbursement_name}}</td>
                              <td>{{report.expense_date}}</td>
                              <td>{{report.expense_amount}}</td>
                              <td>{{report.expense_description}}</td>
                              <td>{{report.created_date}}</td>
                              <td>
                                <ng-container *ngFor="let detail of report.document_details">
                                  <a href="{{ detail.dbpath }}" target="_blank">View</a><i
                                    class="fa fa-eye getRegime"></i>&nbsp;&nbsp;&nbsp;&nbsp;
                                </ng-container>
                              </td>
                              <td>{{report.expense_doc_status_text}}</td>
                              <td>{{report.reject_reason}}</td>
                              <td>
											 
                                <div class="dropdown float-right ember-view dropleft " *ngIf="report.expense_doc_status_code === 'P'">
                                      <a class="dropdown-toggle no-caret text-muted cursor-pointer ember-view" data-toggle="dropdown" aria-haspopup="true"  >
                                       <svg width="512" height="512" viewBox="0 0 512 512" class="icon">
                                        <path d="M162 224c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32M256 224c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32M350 224c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32" id="Path"></path>
                                        <path d="M256 480c123.712 0 224-100.288 224-224S379.712 32 256 32 32 132.288 32 256s100.288 224 224 224zm0 32C114.615 512 0 397.385 0 256S114.615 0 256 0s256 114.615 256 256-114.615 256-256 256z" id="Oval-1"></path>
                                       </svg>
                                      </a>
                                      <ul id="action_dropdown_menu" class="dropdown-menu ember-view" aria-labelledby="dropdownMenuButton" >
                                        <li class="ember-view dropdown-item">
                                          <a title="Approve Reimbursement Claim" (click)="selected_data(report)" href="#Approve_Claim" data-toggle="modal" data-placement="top" style="color: green;">
                                            Approved
                                          </a>
                                        </li>
                                        <li class="ember-view dropdown-item">
                                          <a title="Reject Reimbursement Claim" (click)="selected_data(report)" href="#Reject_Claim" data-toggle="modal" data-placement="top" style="color: red;">
                                            Rejected
                                          </a>
                                        </li>
                                      </ul>
                                      
                                      <!-- <ul class="dropdown-menu"
																			aria-labelledby="dropdownMenuButton">
																			<li class="dropdown-item">
																				Publish
																			</li>
																		</ul> -->
                                       <!-- <a href="#SendMessage11" data-toggle="modal" data-placement="top" class="eye-btn-menu" href="#"><i class="fa fa-eye"></i></a> -->
                                   </div>
                                
                                </td>
                            </tr>
                          </ng-container>
                        </tbody>
                      </table>
                    </div>

                  </div>


                </div>
              </div>


            </div>
          </div>


        </div>
        <!-- /row -->
      </div>


    </div>

      <!-- Approve Reimbursement claim Popup -->
      <div id="Approve_Claim" class="modal fade">
        <div class="modal-dialog">
          <div class="modal-content">
            <!-- <form> -->
            <div class="modal-header theme-bg">
              <h4 class="modal-title"> Approve Reimbursement Claim</h4>
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
              <div class="row text-center">
                <h3>Approve Reimbursement Claim</h3>
                <p>Are you sure you want to Approve this Reimbursement Claim ?</p>
  
              </div>
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary" data-dismiss="modal" (click)="Approve_ReimbursementClaim()">Yes</button>
              <button type="button" class="btn btn-info" data-dismiss="modal" aria-hidden="true">No</button>
            </div>
  
          </div>
        </div>
      </div>
  
      <!-- Reject Reimbursement claim Popup by Arpit-->
      <div id="Reject_Claim" class="modal fade">
        <div class="modal-dialog">
          <div class="modal-content">
            <!-- <form> -->
            <div class="modal-header theme-bg">
              <h4 class="modal-title"> Reject Reimbursement Claim</h4>
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
              <div class="row text-center">
                <h3>Reject Reimbursement Claim</h3>
                <p>Are you sure you want to Reject this Reimbursement Claim ?</p>
  
              </div>
              <div class="row">
                <form [formGroup]="Reject_Reimbursement_cliam">
                <div class="col-md-12">
                 <label for="remarks"><strong>Remarks</strong> :</label>
                  <textarea id="remarks" class="form-control" rows="5" cols="77" formControlName="Remarks" placeholder="Enter your remarks here..."></textarea>
                </div>
                </form>
              </div>
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary"  data-dismiss="modal" (click)="Reject_ReimbursementClaim()">Yes</button>
              <button type="button" class="btn btn-info" data-dismiss="modal" aria-hidden="true">No</button>
  
            </div>
  
          </div>
        </div>
      </div>

  </div>
</section>