<app-sidebar (toggleEmitter)="toggle()"></app-sidebar>

<section>
   <div id="wrapper" [ngClass]="{'active': showSidebar==false}">
      <div class="fakeLoader"></div>
      <div id="page-wrapper">
         <div class="row page-titles">
            <div class="col-md-5 align-self-center">
               <h3 class="text-themecolor" style="margin-left: 13px;">User/Shift Specific Settings</h3>
            </div>
            <div class="col-md-7 align-self-center">
               <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
                  <li class="breadcrumb-item active">User/Shift Specific Settings</li>
               </ol>
            </div>
         </div>

         <div class="container-fluid">
            <!-- /row -->
            <div class="row">
               <div class="col-md-12 mrg-top-0 mrg-bot-25">
                  <div class="card">
                     <div class="card-header">
                        <h4 class="sub-title-inn-box View-Roles-list-outer-box shiftTitleMain" style="float:right;">
                           <a href="#SendMessage" data-toggle="modal" data-placement="top" title="Add"
                              class="btn btn-primary" (click)="checkPopupType('addSetting')">Add Settings </a>
                        </h4>
                     </div>
                     <div class="card-body padd-bot-0 padd-top-0">
                        <div class="row">

                           <div class="col-md-12 padd-top-0">
                              <div class="table-responsive bulk-attendance-outer-box Reimbursements-outer-box">
                                 <table class="table user-list">
                                    <thead>
                                       <tr>
                                          <th id="ember394" class="sortable header-user-role ember-view">
                                             Settings Name
                                             <!---->
                                          </th>
                                          <th id="ember395" class="sortable header-user-role ember-view">
                                             Settings Type
                                             <!---->
                                          </th>
                                          <th id="ember395" class="sortable header-user-role ember-view">
                                             Total hours calculation
                                             <!---->
                                          </th>

                                          <th id="ember395" class="sortable header-user-role ember-view">
                                             Mobile Check-in / Check-out
                                          </th>

                                          <th class="header-actions text-center">Action</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr
                                          *ngFor="let item of shiftSettingDetails | paginate : {itemsPerPage : 10,currentPage: page,totalItems : shiftSettingDetails.length};let i=index;">
                                          <td class="ZPLRow">

                                             <div class="ZPusrName"> <span>{{item.settings_name}}<span></span></span>
                                             </div>
                                          </td>
                                          <ng-container *ngIf="item.settings_type=='shift'">
                                             <td class="CP"><span class="shift-sun-box"></span>{{item.settings_type}} /
                                                {{item.shift_id}}
                                             </td>
                                          </ng-container>
                                          <ng-container *ngIf="item.settings_type =='users'">
                                             <td class="CP"><span class="shift-sun-box"></span>{{item.settings_type}} /
                                                {{ parseApplicableForLength(item.user_id) }}
                                             </td>
                                          </ng-container>
                                          <td>{{item.total_working_hours_calculation1}}</td>

                                          <td>{{item?.is_mobile_check_in_check_out}}</td>

                                          <td class="roles">
                                             <div id="ember398" class="dropdown float-right ember-view">
                                                <div class="job-buttons action-btn-outer-box">

                                                   <a href="#SendMessage" data-toggle="modal"
                                                      class="btn btn-shortlist manage-btn" data-placement="top"
                                                      title="Edit"
                                                      (click)="patchData(item);checkPopupType('editSetting')"><i
                                                         class="ti-pencil-alt"></i></a>
                                                   <a class="btn btn-shortlist manage-btn" data-toggle="modal"
                                                      data-target="#exampleModalCenter" title="delete"
                                                      (click)="openDeleteModal(item.setting_id)"><i class="fa fa-trash"
                                                         aria-hidden="true"></i></a>
                                                </div>

                                             </div>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>

                              </div>
                              <div class="flexbox padd-10" *ngIf="shiftSettingDetails.length >10">
                                 <div class="flexbox padd-10">
                                    <pagination-controls (pageChange)="page = $event;"
                                       style="font-size: 2rem;padding: 6px;font-weight: bold"
                                       class="pagination-controls"></pagination-controls>
                                 </div>
                              </div>

                           </div>

                        </div>
                     </div>
                  </div>


                  <!-- <div class="col-md-12 col-12 padd-top-15 text-center">
               <a  class="btn btn-primary" >Add Settings</a>
               </div> -->

               </div>


            </div>
            <!-- /row -->
         </div>
      </div>


   </div>
</section>
<app-footer></app-footer>


<!-- /////////////////////////// open popup //////////////////////// -->

<div id="SendMessage" class="modal fade add-address-form-box" data-backdrop="static">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <form [formGroup]="addShiftSettingForm">
            <div class="modal-header theme-bg">
               <h4 class="modal-title" *ngIf="popupType =='addSetting'">Add Settings</h4>
               <h4 class="modal-title" *ngIf="popupType !== 'addSetting'">Edit Settings</h4>

               <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
                  (click)="closePopup()">Ã—</button>
            </div>
            <div class="modal-body">

               <div class="form-group">
                  <label class="control-label col-sm-3">Settings Name</label>
                  <div class="col-sm-6">
                     <input type="text" class="form-control" placeholder="Enter settings name"
                        formControlName="settings_name" maxlength="37">
                     <ng-container
                        *ngIf="addShiftSettingForm.get('settings_name').errors && addShiftSettingForm.get('settings_name').touched"
                        class="text-danger">
                        <p class="text-danger">Settings name is required</p>
                     </ng-container>
                  </div>
               </div>


               <div class="form-group">
                  <label class="control-label col-sm-3">Settings Type</label>
                  <div class="col-sm-9">
                     <div class="input-group">
                        <div class="Search-By-all-box">
                           <input type="radio" id="Search-ByAllnew" name="settings_type" class="SearchBy-new"
                              value="shift" formControlName="settings_type" (change)="getSettingType($event)">
                           <label for="Search-ByAllnew">Shifts</label>&nbsp;&nbsp;
                           <input type="radio" id="Search-ByEmployeeCodenew" name="settings_type" class="SearchBy-new"
                              value="users" formControlName="settings_type" (change)="getSettingType($event)">
                           <label for="Search-ByEmployeeCodenew">Users</label>
                        </div>
                     </div>
                     <ng-container
                        *ngIf="addShiftSettingForm.get('settings_type').errors && addShiftSettingForm.get('settings_type').touched"
                        class="text-danger">
                        <p class="text-danger">Settings type is required</p>
                     </ng-container>
                  </div>
               </div>

               <div class="form-group" *ngIf="addShiftSettingForm.value.settings_type=='shift'">
                  <label class="control-label col-sm-3">&nbsp;</label>
                  <div class="col-sm-5">
                     <div class="input-group">
                        <select class="form-control" formControlName="shift_id">
                           <option value="{{item.shift_id}}" *ngFor="let item of shiftDetails">{{item.shift_name}}
                           </option>
                        </select>
                     </div>
                     <ng-container
                        *ngIf="addShiftSettingForm.get('shift_id').errors && addShiftSettingForm.get('shift_id').touched"
                        class="text-danger">
                        <p class="text-danger">Shift is required</p>
                     </ng-container>
                  </div>
               </div>

               <div class="form-group" *ngIf="addShiftSettingForm.value.settings_type =='users'">
                  <label class="control-label col-sm-3">&nbsp;</label>
                  <div class="col-sm-5">
                     <ng-multiselect-dropdown [placeholder]="'Select users'" [settings]="dropdownSettings"
                        formControlName="user_id" [data]="userList" (onSelect)="onItemSelect($event)"
                        (onSelectAll)="onSelectAll($event)" (onDeSelectAll)="onUnselectAll($event)"
                        (onDeSelect)="onItemUnselect($event)">
                     </ng-multiselect-dropdown>
                     <ng-container
                        *ngIf="addShiftSettingForm.get('user_id').errors && addShiftSettingForm.get('user_id').touched"
                        class="text-danger">
                        <p class="text-danger">User is required</p>
                     </ng-container>
                  </div>
               </div>


               <div class="form-group">
                  <label class="control-label col-sm-3">Mobile-Checkin/Checkout</label>
                  <div class="col-sm-9">
                     <div class="input-group">
                        <div class="Search-By-all-box">
                           <input type="radio" id="Mobile-Checkin" name="mobile_check_in_out" class="SearchBy-new"
                              value="Enable" formControlName="mobile_check_in_out">
                           <label for="Mobile-Checkin">Enable</label>&nbsp;&nbsp;
                           <input type="radio" id="Mobile-Checkin1" name="mobile_check_in_out" class="SearchBy-new"
                              value="Disable" formControlName="mobile_check_in_out">
                           <label for="Mobile-Checkin1">Disable</label>
                        </div>
                     </div>
                     <ng-container
                        *ngIf="addShiftSettingForm.get('mobile_check_in_out').errors && addShiftSettingForm.get('mobile_check_in_out').touched"
                        class="text-danger">
                        <p class="text-danger">Mobile checkin/checkout is required</p>
                     </ng-container>
                  </div>
               </div>


               <div class="form-group">
                  <label class="control-label col-sm-3">Calender</label>
                  <div class="col-sm-9">
                     <div class="input-group">
                        <div class="Search-By-all-box">
                           <input type="radio" id="Calender" name="calender_check_in_out" class="SearchBy-new" value="Y"
                              formControlName="calender_check_in_out">
                           <label for="Calender">Enable</label>&nbsp;&nbsp;
                           <input type="radio" id="Calender1" name="calender_check_in_out" class="SearchBy-new"
                              value="N" formControlName="calender_check_in_out">
                           <label for="Calender1">Disable</label>
                           <input type="radio" id="Calender2" name="calender_check_in_out" class="SearchBy-new"
                              value="V" formControlName="calender_check_in_out">
                           <label for="Calender2">View</label>
                        </div>
                     </div>
                     <ng-container
                        *ngIf="addShiftSettingForm.get('calender_check_in_out').errors && addShiftSettingForm.get('calender_check_in_out').touched"
                        class="text-danger">
                        <p class="text-danger">Calender is required</p>
                     </ng-container>
                  </div>
               </div>


               <div class="form-group">
                  <h4 class="top-shif-title-box">Working Hours</h4>
               </div>

               <div class="form-group">
                  <label class="control-label col-sm-3">Total Hours Calculation</label>
                  <div class="col-sm-9">
                     <div class="input-group">
                        <div class="Search-By-all-box">
                           &nbsp;&nbsp;
                           <input type="radio" name="total_hrs_cal" value="first_last_check" id="FilterByTaxReport"
                              formControlName="total_hrs_cal">
                           <label for="FilterByTaxReport">First Check-in &amp; Last Check-out</label>
                           <input type="radio" name="total_hrs_cal" value="every_valid_check" id="FilterByAll"
                              formControlName="total_hrs_cal">
                           <label for="FilterByAll"> Every Valid Check-in &amp; Check-out </label>
                        </div>
                     </div>
                     <ng-container
                        *ngIf="addShiftSettingForm.get('total_hrs_cal').errors && addShiftSettingForm.get('total_hrs_cal').touched"
                        class="text-danger">
                        <p class="text-danger">Total hours calculation is required</p>
                     </ng-container>
                  </div>
               </div>


               <div class="form-group">
                  <label class="control-label col-sm-3">Minimum Hours Required for Day</label>
                  <div class="col-sm-9">
                     <div class="input-group">
                        <div class="Search-By-all-box">
                           &nbsp;&nbsp;
                           <input type="radio" id="SearchByAll" name="minimum_hrs" class="SearchBy" value="Strict"
                              (input)="getMinimumHours($event)" formControlName="minimum_hrs">
                           <label for="SearchByAll">Strict Mode</label>&nbsp;&nbsp;
                           <input type="radio" id="SearchByEmployeeCode" name="minimum_hrs" class="SearchBy"
                              value="Lenient" checked="checked" (input)="getMinimumHours($event)"
                              formControlName="minimum_hrs">
                           <label for="SearchByEmployeeCode">Lenient Mode (Expected Hours)</label>
                        </div>
                     </div>
                     <ng-container
                        *ngIf="addShiftSettingForm.get('minimum_hrs').errors && addShiftSettingForm.get('minimum_hrs').touched"
                        class="text-danger">
                        <p class="text-danger">Minimum hours is required</p>
                     </ng-container>
                  </div>
               </div>

               <div class="form-group" *ngIf="addShiftSettingForm.value.minimum_hrs=='Strict'">
                  <label class="control-label col-sm-3"> </label>
                  <div class="col-sm-6">
                     <div class="row Start-Time-end-time-box">
                        <div class="form-group" id="ZPAtt_shiftMarginStartLayout">

                           <div class="col-sm-12">
                              <label class="control-label FL PT4I">
                                 <input type="radio" id="Search-ByAllnew12" name="manual_input" class="SearchBy-new12"
                                    value="manual_input" formControlName="manual_input">
                                 <label for="Search-ByAllnew12">Manual Input</label>&nbsp;&nbsp;
                                 <input type="radio" id="Search-ByEmployeeCodenew12" name="manual_input"
                                    class="SearchBy-new12" value="shift_hours" checked="checked"
                                    formControlName="manual_input">
                                 <label for="Search-ByEmployeeCodenew12">Shift Hours</label>

                              </label>

                              <ng-container
                                 *ngIf="addShiftSettingForm.get('manual_input').errors && addShiftSettingForm.get('manual_input').touched"
                                 class="text-danger">
                                 <p class="text-danger">Manual Input or Shift Hours is required</p>
                              </ng-container>

                           </div>
                        </div>

                        <div>
                           <div class="form-group" id="ZPAtt_shiftMarginStartLayout"
                              *ngIf="this.addShiftSettingForm.value.manual_input=='shift_hours'">
                              <div class="col-sm-12">
                                 <div style="margin-top:5px;">
                                    Full Day : Duration of the Shift
                                 </div>
                                 <div style="margin-top: 20px;padding-bottom: 10px;">
                                    Half Day : Half of the shift Duration
                                 </div>

                              </div>
                           </div>

                        </div>


                        <div *ngIf="this.addShiftSettingForm.value.manual_input=='manual_input'">
                           <div class="form-group" id="ZPAtt_shiftMarginStartLayout">

                              <!-- <div class="col-sm-9">
                             <label class="control-label FL PT4I">Full Day</label>
                             <div class="PL0 FL MR10">
                              <input class="form-control" type="time" id="timePicker" name="full_day" formControlName="full_day" style="width: 100%;" >
                              
                              <ng-container *ngIf="addShiftSettingForm.get('full_day').errors && addShiftSettingForm.get('full_day').touched" class="text-danger">
                                 <p class="text-danger">Full day is required</p>
                               </ng-container>
         
                             </div>
                           </div> -->
                              <!-- //////////////////////////////////////// -->

                              <div class="col-sm-9">
                                 <label class="control-label FL PT4I">Full Day</label>

                                 <div class="PL0 FL MR10">
                                    <div class="input-group bootstrap-timepicker timepicker zp_Cust-timpckr">
                                       <input id="ZPAtt_shiftMarginStarts" type="text" class="form-control"
                                          placeholder="00:00" formControlName="full_day" readonly>
                                       <span class="input-group-addon"
                                          (click)="togglePopover(popoverFullDay);formatTime(full_day,'full_day')"
                                          #popoverFullDay="bs-popover" [popover]="popoverContentFullDay"
                                          triggers="manual" [outsideClick]="true">
                                          <i class="fa fa-clock-o"></i></span>
                                    </div>
                                 </div>

                                 <ng-container
                                    *ngIf="addShiftSettingForm.get('full_day').errors && addShiftSettingForm.get('full_day').touched"
                                    class="text-danger">
                                    <p class="text-danger">Full day is required</p>
                                 </ng-container>
                                 <ng-template #popoverContentFullDay>
                                    <timepicker [(ngModel)]="full_day" (ngModelChange)="formatTime(full_day,'full_day')"
                                       [hourFormat]="24" [showMeridian]="false" [ngModelOptions]="{standalone: true}">
                                    </timepicker>
                                 </ng-template>

                              </div>


                           </div>

                           <div id="Shift-Margin-box">
                              <div class="form-group" id="ZPAtt_shiftMarginStartLayout">

                                 <!-- <div class="col-sm-9">
                            <label class="control-label FL PT4I">Half Day</label>
                             <div class="PL0 FL MR10">
                              <input class="form-control" type="time" id="timePicker" name="timePicker" formControlName="half_day" style="width: 100%;">
                            </div>
         
                              <ng-container *ngIf="addShiftSettingForm.get('half_day').errors && addShiftSettingForm.get('half_day').touched" class="text-danger">
                              <p class="text-danger">Half day is required</p>
                             </ng-container>
                             </div> -->

                                 <div class="col-sm-9">
                                    <label class="control-label FL PT4I">Half Day</label>

                                    <div class="PL0 FL MR10">
                                       <div class="input-group bootstrap-timepicker timepicker zp_Cust-timpckr">
                                          <input id="ZPAtt_shiftMarginStarts" type="text" class="form-control"
                                             placeholder="00:00" formControlName="half_day" readonly>
                                          <span class="input-group-addon"
                                             (click)="togglePopover(popoverHalfDay);formatTime(half_day,'half_day')"
                                             #popoverHalfDay="bs-popover" [popover]="popoverContentHalfDay"
                                             triggers="manual" [outsideClick]="true">
                                             <i class="fa fa-clock-o"></i></span>
                                       </div>
                                    </div>

                                    <ng-container
                                       *ngIf="addShiftSettingForm.get('half_day').errors && addShiftSettingForm.get('half_day').touched"
                                       class="text-danger">
                                       <p class="text-danger">Half day is required</p>
                                    </ng-container>
                                    <ng-template #popoverContentHalfDay>
                                       <timepicker [(ngModel)]="half_day"
                                          (ngModelChange)="formatTime(half_day,'half_day')" [hourFormat]="24"
                                          [showMeridian]="false" [ngModelOptions]="{standalone: true}">
                                       </timepicker>
                                    </ng-template>

                                 </div>




                              </div>
                           </div>
                        </div>


                     </div>
                  </div>

               </div>

               <!-- ///////////////////////////////////////////////////////////////////////////////////////////// -->


               <div class="form-group" *ngIf="addShiftSettingForm.value.minimum_hrs=='Lenient'">
                  <label class="control-label col-sm-3"> </label>
                  <div class="col-sm-6">
                     <div class="row Start-Time-end-time-box">
                        <div class="form-group" id="ZPAtt_shiftMarginStartLayout">

                           <div class="col-sm-12 ">
                              <label class="control-label FL PT4I">

                                 <input type="radio" id="Search-ByAllnew12" name="manual_input" class="SearchBy-new12"
                                    value="manual_input_len" formControlName="manual_input">
                                 <label for="Search-ByAllnew12">Manual Input</label>&nbsp;&nbsp;
                                 <input type="radio" id="Search-ByEmployeeCodenew12" name="manual_input"
                                    class="SearchBy-new12" value="shift_hours_len" checked="checked"
                                    formControlName="manual_input">
                                 <label for="Search-ByEmployeeCodenew12">Shift Hours</label>

                              </label>

                              <ng-container
                                 *ngIf="addShiftSettingForm.get('manual_input').errors && addShiftSettingForm.get('manual_input').touched"
                                 class="text-danger">
                                 <p class="text-danger">Manual input or shift hours is required</p>
                              </ng-container>
                           </div>
                        </div>

                        <div>
                           <div class="form-group" id="ZPAtt_shiftMarginStartLayout"
                              *ngIf="this.addShiftSettingForm.value.manual_input =='shift_hours_len' && addShiftSettingForm.value.minimum_hrs=='Lenient'">
                              <div class="col-sm-12">
                                 <div style="margin-top: 5px;padding-bottom: 10px;">
                                    Per Day : Duration of the Shift
                                 </div>

                              </div>
                           </div>

                        </div>



                        <div *ngIf="this.addShiftSettingForm.value.manual_input=='manual_input_len'">
                           <div class="form-group" id="ZPAtt_shiftMarginStartLayout">

                              <!-- <div class="col-sm-9">
                 <label class="control-label FL PT4I">Per Day</label>
                 <div class="PL0 FL MR10">
                  <input class="form-control" type="time" id="timePicker" name="full_day" formControlName="per_day" style="width: 100%;">
                 </div>
                 <ng-container *ngIf="addShiftSettingForm.get('per_day').errors && addShiftSettingForm.get('per_day').touched" class="text-danger">
                  <p class="text-danger">Per day is required</p>
                </ng-container>
               </div> -->



                              <div class="col-sm-9">
                                 <label class="control-label FL PT4I">Per Day</label>

                                 <div class="PL0 FL MR10">
                                    <div class="input-group bootstrap-timepicker timepicker zp_Cust-timpckr">
                                       <input id="ZPAtt_shiftMarginStarts" type="text" class="form-control"
                                          placeholder="00:00" formControlName="per_day" readonly>
                                       <span class="input-group-addon"
                                          (click)="togglePopover(popoverPerDay);formatTime(per_day,'per_day')"
                                          #popoverPerDay="bs-popover" [popover]="popoverContentPerDay" triggers="manual"
                                          [outsideClick]="true">
                                          <i class="fa fa-clock-o"></i></span>
                                    </div>
                                 </div>

                                 <ng-container
                                    *ngIf="addShiftSettingForm.get('per_day').errors && addShiftSettingForm.get('per_day').touched"
                                    class="text-danger">
                                    <p class="text-danger">Per day is required</p>
                                 </ng-container>
                                 <ng-template #popoverContentPerDay>
                                    <timepicker [(ngModel)]="per_day" (ngModelChange)="formatTime(per_day,'per_day')"
                                       [hourFormat]="24" [showMeridian]="false" [ngModelOptions]="{standalone: true}">
                                    </timepicker>
                                 </ng-template>

                              </div>






                           </div>
                        </div>


                     </div>
                  </div>

               </div>




               <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
            </div>

            <div class="form-group">
               <label class="control-label col-sm-3">&nbsp;</label>
               <div class="col-sm-6">
                  <div class="input-group">
                     <div class="Overtime-Search-By-all-box">
                        &nbsp;&nbsp;
                        <input type="checkbox" name="show_over_time" class="SearchBy-new65" value="showOvertime"
                           (input)="showOverTimeDeviation($event)" formControlName="show_over_time">
                        <label class="ByAllnew" for="Search-ByAllnew">Show Overtime / Deviation</label>&nbsp;&nbsp;

                     </div>
                  </div>
                  <ng-container
                     *ngIf="addShiftSettingForm.get('show_over_time').errors && addShiftSettingForm.get('show_over_time').touched"
                     class="text-danger">
                     <p class="text-danger">Show overtime is required</p>
                  </ng-container>
               </div>

            </div>


            <div class="form-group">
               <label class="control-label col-sm-3">Maximum Hours Required for Day</label>
               <div class="col-sm-7">
                  <div class="input-group">
                     <div class="Search-By-all-box">
                        <input type="radio" name="max_hrs" id="FilterByTaxReport-Maximum" value="Disable"
                           (input)="getMinimumHours($event)" formControlName="max_hrs" checked="checked">
                        <label for="FilterByTaxReport-Maximum">Disable</label>

                        <input type="radio" name="max_hrs" id="FilterByAll-Maximum" value="Enable"
                           (input)="getMinimumHours($event)" formControlName="max_hrs">
                        <label for="FilterByAll-Maximum">Enable </label>
                     </div>
                  </div>
                  <ng-container
                     *ngIf="addShiftSettingForm.get('max_hrs').errors && addShiftSettingForm.get('max_hrs').touched"
                     class="text-danger">
                     <p class="text-danger">Max hours is required</p>
                  </ng-container>
               </div>
            </div>


            <div id="weekend-box-inner">
               <label class="control-label col-sm-3">&nbsp;</label>

               <div class="col-sm-6"
                  *ngIf="this.addShiftSettingForm.value.max_hrs=='Enable' && this.addShiftSettingForm.value.minimum_hrs=='Strict' ">
                  <div class="Start-Time-end-time-box">
                     <div class="form-group" id="ZPAtt_shiftMarginStartLayout">


                        <!-- <div class="col-sm-9 ">
                           <label class="control-label FL PT4I">Full Day</label>
                             <div class="form-group">
                              <input class="form-control" type="time" id="timePicker" name="max_full_day" formControlName="max_full_day" style="width: 100%;">
                              
                              <ng-container *ngIf="addShiftSettingForm.get('max_full_day').errors && addShiftSettingForm.get('max_full_day').touched" class="text-danger">
                              <p class="text-danger">Full day is required</p>
                              </ng-container>
                             </div>
                           </div> -->



                        <div class="col-sm-9">
                           <label class="control-label FL PT4I">Full Day</label>

                           <div class="PL0 FL MR10">
                              <div class="input-group bootstrap-timepicker timepicker zp_Cust-timpckr">
                                 <input id="ZPAtt_shiftMarginStarts" type="text" class="form-control"
                                    placeholder="00:00" formControlName="max_full_day" readonly>
                                 <span class="input-group-addon"
                                    (click)="togglePopover(popoverMaxFullDay);formatTime(max_full_day,'max_full_day')"
                                    #popoverMaxFullDay="bs-popover" [popover]="popoverContentMaxFullDay"
                                    triggers="manual" [outsideClick]="true">
                                    <i class="fa fa-clock-o"></i></span>
                              </div>
                           </div>

                           <ng-container
                              *ngIf="addShiftSettingForm.get('max_full_day').errors && addShiftSettingForm.get('max_full_day').touched"
                              class="text-danger">
                              <p class="text-danger">Full day is required</p>
                           </ng-container>
                           <ng-template #popoverContentMaxFullDay>
                              <timepicker [(ngModel)]="max_full_day"
                                 (ngModelChange)="formatTime(max_full_day,'max_full_day')" [hourFormat]="24"
                                 [showMeridian]="false" [ngModelOptions]="{standalone: true}"></timepicker>
                           </ng-template>

                        </div>




                     </div>

                     <div class="form-group" id="ZPAtt_shiftMarginEndLayout">

                        <!-- <div class="col-sm-9">
                            <label class="control-label FL PT4I">Half Day</label> 
                             <div class="form-group">
                                 <input class="form-control" type="time" id="timePicker" name="max_half_day" formControlName="max_half_day" style="width: 100%;">   
                                 <ng-container *ngIf="addShiftSettingForm.get('max_half_day').errors && addShiftSettingForm.get('max_half_day').touched" class="text-danger">
                                    <p class="text-danger">Half day is required</p>
                                 </ng-container>                 
                           </div>               
                        </div> -->

                        <div class="col-sm-9">
                           <label class="control-label FL PT4I">Half Day</label>

                           <div class="PL0 FL MR10">
                              <div class="input-group bootstrap-timepicker timepicker zp_Cust-timpckr">
                                 <input id="ZPAtt_shiftMarginStarts" type="text" class="form-control"
                                    placeholder="00:00" formControlName="max_half_day" readonly>
                                 <span class="input-group-addon"
                                    (click)="togglePopover(popoverMaxHalfDay);formatTime(max_half_day,'max_half_day')"
                                    #popoverMaxHalfDay="bs-popover" [popover]="popoverContentMaxHalfDay"
                                    triggers="manual" [outsideClick]="true">
                                    <i class="fa fa-clock-o"></i></span>
                              </div>
                           </div>

                           <ng-container
                              *ngIf="addShiftSettingForm.get('max_half_day').errors && addShiftSettingForm.get('max_half_day').touched"
                              class="text-danger">
                              <p class="text-danger">Half day is required</p>
                           </ng-container>
                           <ng-template #popoverContentMaxHalfDay>
                              <timepicker [(ngModel)]="max_half_day"
                                 (ngModelChange)="formatTime(max_half_day,'max_half_day')" [hourFormat]="24"
                                 [showMeridian]="false" [ngModelOptions]="{standalone: true}"></timepicker>
                           </ng-template>

                        </div>



                     </div>
                  </div>
               </div>



               <div class="col-sm-6"
                  *ngIf="this.addShiftSettingForm.value.minimum_hrs =='Lenient' && this.addShiftSettingForm.value.max_hrs=='Enable'">
                  <div class="Start-Time-end-time-box">
                     <div class="form-group" id="ZPAtt_shiftMarginStartLayout">

                        <!-- <div class="col-sm-12">
                                 <label class="control-label FL PT4I">Per Day</label>
                                 <div>
                                  <input class="form-control" type="time" id="timePicker" name="max_per_day" formControlName="max_per_day" style="width: 100%;">
                                 </div>
                                 <ng-container *ngIf="addShiftSettingForm.get('max_per_day').errors && addShiftSettingForm.get('max_per_day').touched" class="text-danger">
                                    <p class="text-danger">Per Day is required</p>
                                 </ng-container>  
                               </div> -->



                        <div class="col-sm-9">
                           <label class="control-label FL PT4I">Per Day</label>

                           <div class="PL0 FL MR10">
                              <div class="input-group bootstrap-timepicker timepicker zp_Cust-timpckr">
                                 <input id="ZPAtt_shiftMarginStarts" type="text" class="form-control"
                                    placeholder="00:00" formControlName="max_per_day" readonly>
                                 <span class="input-group-addon"
                                    (click)="togglePopover(popoverMaxPerDay);formatTime(max_per_day,'max_per_day')"
                                    #popoverMaxPerDay="bs-popover" [popover]="popoverContentMaxPerDay" triggers="manual"
                                    [outsideClick]="true">
                                    <i class="fa fa-clock-o"></i></span>
                              </div>
                           </div>

                           <ng-container
                              *ngIf="addShiftSettingForm.get('max_per_day').errors && addShiftSettingForm.get('max_per_day').touched"
                              class="text-danger">
                              <p class="text-danger">Per day is required</p>
                           </ng-container>
                           <ng-template #popoverContentMaxPerDay>
                              <timepicker [(ngModel)]="max_per_day"
                                 (ngModelChange)="formatTime(max_per_day,'max_per_day')" [hourFormat]="24"
                                 [showMeridian]="false" [ngModelOptions]="{standalone: true}"></timepicker>
                           </ng-template>

                        </div>


                     </div>

                  </div>
               </div>




               <!-- <div *ngIf="this.addShiftSettingForm.value.minimum_hrs=='Lenient' && showMaximumHrs =='Enable'">
                           <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                              <div class="col-sm-9">
                                <label class="control-label FL PT4I">Per Day</label>
                                <div class="PL0 FL MR10">
                                 <input class="form-control" type="time" id="timePicker" name="full_day" formControlName="max_per_day" style="width: 100%;">
                                </div>
                              </div>
                           </div>
                        </div> -->


               <div class="form-group">
                  <label class="control-label col-sm-3">Round-Off</label>
                  <div class="col-sm-7">
                     <div class="input-group ">
                        <div class="Search-By-all-box">
                           &nbsp;&nbsp;
                           <input type="radio" name="round_of" id="FilterByTaxReport-Maximum12" value="Disable"
                              (input)="showRoundOf($event)" formControlName="round_of">
                           <label for="FilterByTaxReport-Maximum12">Disable</label>

                           <input type="radio" name="round_of" id="FilterByAll-Maximum12" value="Enable"
                              (input)="showRoundOf($event)" formControlName="round_of">
                           <label for="FilterByAll-Maximum12">Enable </label>
                        </div>
                     </div>
                     <ng-container
                        *ngIf="addShiftSettingForm.get('round_of').errors && addShiftSettingForm.get('round_of').touched"
                        class="text-danger">
                        <p class="text-danger">Round of is required</p>
                     </ng-container>
                  </div>
               </div>


               <div id="weekend-box-inner12" *ngIf="showRoundOff =='Enable'">
                  <label class="control-label col-sm-3">&nbsp;</label>
                  <div class="col-sm-6">
                     <div class="Start-Time-end-time-box">
                        <div class="form-group" id="ZPAtt_shiftMarginStartLayout">

                           <div class="col-sm-12 ">
                              <label class="control-label FL PT4I">First Check-In &nbsp;&nbsp;</label>
                              <div style="display: flex;">
                                 <div class="PL0 FL MR10">
                                    <div class="input-group bootstrap-timepicker timepicker zp_Cust-timpckr">
                                       <input id="ZPAtt_shiftMarginStarts" autocomplete="off" type="text"
                                          class="form-control" formControlName="firstCheckIn" maxlength="4"
                                          oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 4)">
                                       <ng-container
                                          *ngIf="addShiftSettingForm.get('firstCheckIn').errors && addShiftSettingForm.get('firstCheckIn').touched"
                                          class="text-danger">
                                          <p class="text-danger">First Check in is required</p>
                                       </ng-container>
                                    </div>
                                 </div>
                                 <label class="control-label FL PT4I ByAllnew">minutes</label>
                              </div>

                           </div>
                        </div>

                        <div class="form-group" id="ZPAtt_shiftMarginEndLayout">
                           <div class="col-sm-12">
                              <label class="control-label FL PT4I">Last Check-Out</label>
                              <div style="display: flex;">
                                 <div class="PL0 FL MR10">
                                    <div class="input-group bootstrap-timepicker timepicker zp_Cust-timpckr">
                                       <input id="ZPAtt_shiftMarginEnds" autocomplete="off" type="text"
                                          class="form-control" formControlName="last_checkout" maxlength="4"
                                          oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 4)">
                                    </div>

                                    <ng-container
                                       *ngIf="addShiftSettingForm.get('last_checkout').errors && addShiftSettingForm.get('last_checkout').touched"
                                       class="text-danger">
                                       <p class="text-danger">Last Check out is required</p>
                                    </ng-container>
                                 </div>
                                 <label class="control-label FL PT4I ByAllnew">minutes</label>
                              </div>
                           </div>


                        </div>
                        <div class="form-group" id="ZPAtt_shiftMarginEndLayout">

                           <div class="col-sm-12">
                              <label class="control-label FL PT4I">Worked Hours&nbsp;&nbsp;</label>
                              <div style="display: flex;">
                                 <div class="PL0 FL MR10">
                                    <div class="input-group bootstrap-timepicker timepicker zp_Cust-timpckr">
                                       <input id="ZPAtt_shiftMarginEnds" autocomplete="off" type="text"
                                          class="form-control" placeholder="" formControlName="worked_hours"
                                          maxlength="4"
                                          oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 4)">
                                       <ng-container
                                          *ngIf="addShiftSettingForm.get('worked_hours').errors && addShiftSettingForm.get('worked_hours').touched"
                                          class="text-danger">
                                          <p class="text-danger">Worked hours is required</p>
                                       </ng-container>
                                    </div>
                                 </div>
                                 <label class="control-label FL PT4I ByAllnew">minutes</label>
                              </div>

                           </div>
                        </div>
                     </div>
                  </div>
               </div>

               <!-- <div class="form-group">
                  <h4 class="top-shif-title-box" style="margin-left: 20px;">Grace Period Policy</h4>
               </div>
               <div class="form-group">
                  <div class="col-sm-6">
                     <div class="Search-By-all-box">
                        <input type="checkbox" name="Enable-Grace-Period" class="SearchBy-new65" value="Enable"
                           (change)="EnableGracePeriod($event)" formControlName="grace_period">
                        <label class="ByAllnew" for="Enable-Grace-Period">Enable Grace Period</label>&nbsp;&nbsp;
         
                     </div>
                  </div>
               </div>
               <div id="outer-Rule-form-group-box" *ngIf="enableGracePeriod == true ">
                  <div formArrayName="enableGrace">
                     <div id="Rule-form-group-box" *ngFor="let field of enableGrace.controls; let i = index" [formGroupName]="i">
                        <div class="col-sm-12">
                           <div class="Rule-form-inner-box">
                              <div class="form-group">
                                 <strong class="input-group">Rule {{ i + 1 }}</strong>
                                 <button type="button" class="close close-btn-box" (click)="removeRule(i)">Ã—</button>
                              </div>
                              <div>
                                 <div class="form-group">
                                    <label class="control-label col-sm-3">Consider as deviation when</label>
                                    <div class="col-sm-9">
                                       <div class="Start-Time-end-time-box">
         
                                          <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                                             <div class="col-sm-12" style="display: flex;">
                                                <label class="control-label FL PT4I">
                                                   <input class="user-corner" type="checkbox" name="Search-qwe1" id="Search-qwe1"
                                                      formControlName="firstCheckInLateBy" (change)="toggleTimePicker(i)">
                                                   <label for="Search-qwe1">First check-in is late by</label>
                                                </label>
                                                <div class="deviation">
                                                   <div class="form-group">
                                                      <input class="form-control" autocomplete="off" type="text" id="timePicker"
                                                         name="timePicker" style="width:70%"
                                                         formControlName="firstCheckInLateTime"
                                                         oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 3)"
                                                         [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.firstCheckInLateBy').value">
                                                   </div>
                                                </div>
                                                <label class="control-label FL PT4I">hours</label>
                                             </div>
                                          </div>
                                          <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                                             <div class="col-sm-12" style="display: flex;">
                                                <label class="control-label FL PT4I">
                                                   <input class="user-corner" type="checkbox" name="Search-qwe2" id="Search-qwe2"
                                                      value="ALL" formControlName="lastCheckOutEarlyBy"
                                                      (change)="toggleLastCheckOutEarlyTime(i)">
                                                   <label for="Search-qwe2">Last check-out is early by</label>
                                                </label>
                                                <div class="deviation">
                                                   <div class="form-group">
                                                      <input class="form-control" type="text" id="timePicker" name="timePicker"
                                                         style="width:70%" formControlName="lastCheckOutEarlyTime"
                                                         autocomplete="off"
                                                         oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 3)"
                                                         [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.lastCheckOutEarlyTime').value">
                                                   </div>
                                                </div>
                                                <label class="control-label FL PT4I">hours</label>
                                             </div>
                                          </div>
         
                                          <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                                             <div class="col-sm-12 " style="display: flex;">
                                                <label class="control-label FL PT4I">
                                                   <input class="user-corner" type="checkbox" name="Search-qwe3" id="Search-qwe3"
                                                      value="ALL" formControlName="workingHoursLessBy"
                                                      (change)="toggleWorkingHoursLessTime(i)">
                                                   <label for="Search-qwe3">Working hours is less by </label>
         
                                                </label>
                                                <div class="deviation">
                                                   <div class="form-group">
                                                      <input class="form-control" type="text" id="timePicker" name="timePicker"
                                                         style="width:70%" autocomplete="off"
                                                         formControlName="workingHoursLessTime"
                                                         oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 3)"
                                                         [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.workingHoursLessTime').value">
                                                   </div>
                                                </div>
                                                <label class="control-label FL PT4I">hours</label>
         
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                                 <p>1111</p>
                                 <p>1111</p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="form-group">
                     <a class="add-rule-btn ByAllnewRule" (click)="addField()"><i class="fa fa-plus" aria-hidden="true"></i> Add
                        Rule</a>
                  </div>
               </div> -->


               <div class="form-group">
                  <h4 class="top-shif-title-box" style="margin-left: 20px;">Grace Period Policy</h4>
               </div>

               <div class="form-group">
                  <div class="col-sm-6">
                     <div class="Search-By-all-box">
                        <input type="checkbox" name="Enable-Grace-Period" class="SearchBy-new65" value="Enable"
                           (change)="EnableGracePeriod($event)" formControlName="grace_period">
                        <label class="ByAllnew" for="Enable-Grace-Period">Enable Grace Period</label>&nbsp;&nbsp;
                     </div>
                  </div>
               </div>

               <div id="outer-Rule-form-group-box" *ngIf="enableGracePeriod == true">
                  <div formArrayName="enableGrace">
                     <div id="Rule-form-group-box" *ngFor="let field of enableGrace.controls; let i = index"
                        [formGroupName]="i">
                        <div class="col-sm-12">
                           <div class="Rule-form-inner-box">
                              <div class="form-group">
                                 <strong class="input-group">Rule {{ i + 1 }}</strong>
                                 <button type="button" class="close close-btn-box"
                                    (click)="removeRule(i, true)">Ã—</button>
                              </div>
                              <div>
                                 <div class="form-group">
                                    <label class="control-label col-sm-3">Consider as deviation when</label>
                                    <div class="col-sm-9">
                                       <div class="Start-Time-end-time-box">
                                          <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                                             <div class="col-sm-12 no-padd" style="display: flex;">
                                                <label class="control-label FL PT4I col-sm-6">

                                                   <input class="user-corner" type="checkbox" name="firstCheckInLateBy"
                                                      id="firstCheckInLateBy" formControlName="firstCheckInLateBy"
                                                      (change)="updateDisabledFields(i, 'firstCheckInLateBy', $event.target.checked)">
                                                   <label>First check-in is late by</label>

                                                </label>
                                                <div class="deviation">
                                                   <div class="form-group">
                                                      <input class="form-control" autocomplete="off" type="text"
                                                         id="firstCheckInLateTime" name="firstCheckInLateTime"
                                                         style="width:70%" formControlName="firstCheckInLateTime"
                                                         oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 3)"
                                                         [disabled]="addShiftSettingForm.get('enableGrace.' + i + '.firstCheckInLateBy').value">
                                                   </div>

                                                   <div
                                                      *ngIf="field.get('firstCheckInLateTime').hasError('required') && field.get('firstCheckInLateTime').touched"
                                                      class="error-message" style="color: red">
                                                      This field is required.
                                                   </div>

                                                </div>
                                                <label class="control-label FL PT4I">minutes</label>
                                             </div>
                                          </div>

                                          <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                                             <div class="col-sm-12 no-padd" style="display: flex;">
                                                <label class="control-label FL PT4I col-sm-6">
                                                   <input class="user-corner" type="checkbox" name="lastCheckOutEarlyBy"
                                                      id="lastCheckOutEarlyBy" formControlName="lastCheckOutEarlyBy"
                                                      (change)="updateDisabledFields(i, 'lastCheckOutEarlyBy', $event.target.checked)">
                                                   <label>Last check-out is early by</label>
                                                </label>
                                                <div class="deviation">
                                                   <div class="form-group">
                                                      <input class="form-control" type="text" id="lastCheckOutEarlyTime"
                                                         name="lastCheckOutEarlyTime" style="width:70%"
                                                         formControlName="lastCheckOutEarlyTime" autocomplete="off"
                                                         oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 3)"
                                                         [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.lastCheckOutEarlyBy').value">
                                                   </div>
                                                   <div
                                                      *ngIf="field.get('lastCheckOutEarlyTime').hasError('required') && field.get('lastCheckOutEarlyTime').touched"
                                                      class="error-message" style="color: red">
                                                      This field is required.
                                                   </div>
                                                </div>
                                                <label class="control-label FL PT4I">minutes</label>
                                             </div>
                                          </div>

                                          <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                                             <div class="col-sm-12 no-padd" style="display: flex;">
                                                <label class="control-label FL PT4I col-sm-6">
                                                   <input class="user-corner" type="checkbox" name="workingHoursLessBy"
                                                      id="workingHoursLessBy" formControlName="workingHoursLessBy"
                                                      (change)="updateDisabledFields(i, 'workingHoursLessBy', $event.target.checked)">
                                                   <label>Working hours is less by</label>
                                                </label>
                                                <div class="deviation">
                                                   <div class="form-group">
                                                      <input class="form-control" type="text" id="workingHoursLessTime"
                                                         name="workingHoursLessTime" style="width:70%"
                                                         autocomplete="off" formControlName="workingHoursLessTime"
                                                         oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 3)"
                                                         [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.workingHoursLessBy').value">
                                                   </div>
                                                   <div
                                                      *ngIf="field.get('workingHoursLessTime').hasError('required') && field.get('workingHoursLessTime').touched"
                                                      class="error-message" style="color: red">
                                                      This field is required.
                                                   </div>
                                                </div>
                                                <label class="control-label FL PT4I">minutes</label>
                                             </div>
                                          </div>
                                          <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                                             <div class="col-sm-12 no-padd" style="display: flex;">
                                                <label class="control-label FL PT4I col-sm-6">
                                                   <input class="user-corner" type="checkbox" name="firstCheckinR2"
                                                      id="firstCheckinR2" formControlName="firstCheckinR2"
                                                      (change)="updateDisabledFields(i, 'firstCheckinR2', $event.target.checked)">
                                                   <label>First check-in is late by (R2)</label>
                                                </label>
                                                <div class="deviation">
                                                   <div class="form-group">
                                                      <input class="form-control" type="text"
                                                         id="firstCheckinR2LateTime" name="firstCheckinR2LateTime"
                                                         style="width:70%" autocomplete="off"
                                                         formControlName="firstCheckinR2LateTime"
                                                         oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 3)"
                                                         [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.firstCheckinR2').value">
                                                   </div>
                                                   <div
                                                      *ngIf="field.get('firstCheckinR2LateTime').hasError('required') && field.get('firstCheckinR2LateTime').touched"
                                                      class="error-message" style="color: red">
                                                      This field is required.
                                                   </div>
                                                </div>
                                                <label class="control-label FL PT4I">minutes</label>
                                             </div>
                                          </div>
                                          <!-- <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                                    <div class="col-sm-12 " style="display: flex;">
                                      <label class="control-label FL PT4I">
                                        <input class="user-corner" type="checkbox" name="firstCheckinR3" id="firstCheckinR3"
                                               formControlName="firstCheckinR3" (change)="updateDisabledFields(i, 'firstCheckinR3', $event.target.checked)">
                                        <label>First check-in is late by (R3)</label>
                                      </label>
                                      <div class="deviation">
                                        <div class="form-group">
                                          <input class="form-control" type="text" id="firstCheckinR3LateTime" name="firstCheckinR3LateTime"
                                                 style="width:70%" autocomplete="off" formControlName="firstCheckinR3LateTime"
                                                 oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 3)"
                                                 [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.firstCheckinR3').value">
                                        </div>
                                        <div *ngIf="field.get('firstCheckinR3LateTime').hasError('required') && field.get('firstCheckinR3LateTime').touched" class="error-message" style="color: red">
                                          This field is required.
                                        </div>
                                      </div>
                                      <label class="control-label FL PT4I">minutes</label>
                                    </div>
                                  </div> -->
                                       </div>
                                    </div>
                                 </div>

                                 <!-- /////////////////////////////////////////////////////////////////////////// -->



                                 <div class="form-group" id="ZPAtt_shiftMarginStartLayout">

                                    <div class="col-sm-12 " style="display: flex;">

                                       <label class="control-label col-sm-3">Deduct when</label>

                                       <label class="control-label FL PT4I">
                                          <input type="radio" value="deviation_more_than"
                                             formControlName="deviationsRadio" id="FilterByTaxReport-Maximum{{i}}"
                                             (change)="toggleDeviationControls(i)">
                                          <label for="FilterByTaxReport-Maximum{{i}}">Deviations are more
                                             than</label>&nbsp;&nbsp;
                                       </label>
                                       <div>
                                          <div class="widthInput">
                                             <input id="ZPAtt_shiftMarginStarts" type="text"
                                                formControlName="deviationsMoreThanTimes" class="form-control"
                                                (input)="getDeviationMoreThan($event,i)" maxlength="4"
                                                autocomplete="off"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 4)"
                                                [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.deviationsMoreThanTimes').value">
                                          </div>
                                          <div
                                             *ngIf="field.get('deviationsMoreThanTimes').hasError('required') && field.get('deviationsMoreThanTimes').touched"
                                             class="error-message" style="color: red">
                                             Required.
                                          </div>
                                       </div>
                                       <label class="ByAllnew">times per</label>
                                       <div class="input-group ByAllnew">
                                          <select class="form-control" formControlName="deviationsMoreThanPeriod"
                                             (change)="getPayPeriod($event,i)"
                                             [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.deviationsMoreThanPeriod').value">
                                             <option value="week">Week</option>
                                             <option value="month">Month</option>
                                             <option value="pay_period">Pay Period</option>
                                          </select>
                                          <div
                                             *ngIf="field.get('deviationsMoreThanPeriod').hasError('required') && field.get('deviationsMoreThanPeriod').touched"
                                             class="error-message" style="color: red">
                                             Required.
                                          </div>
                                       </div>
                                    </div>
                                 </div>


                                 <div class="form-group" id="ZPAtt_shiftMarginStartLayout">

                                    <div class="col-sm-12 " style="display: flex;">

                                       <label class="control-label col-sm-3">&nbsp;</label>

                                       <label class="control-label FL PT4I">

                                          <input type="radio" value="deviation_multiples"
                                             formControlName="deviationsRadio" id="FilterByTaxReport-Multiple{{i}}"
                                             (change)="toggleDeviationControls(i)">
                                          <label for="FilterByTaxReport-Multiple{{i}}">Deviations occur on multiples
                                             of</label>&nbsp;&nbsp;

                                       </label>
                                       <div class="widthInput">
                                          <div class="input-group bootstrap-timepicker timepicker zp_Cust-timpckr">
                                             <input id="ZPAtt_shiftMarginStarts" type="text"
                                                formControlName="deviationsMultiplesOf" class="form-control"
                                                placeholder="" (input)="getDeviationMoreThan($event,i)" maxlength="4"
                                                autocomplete="off"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 4)"
                                                [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.deviationsMultiplesOf').value">
                                          </div>

                                          <div
                                             *ngIf="field.get('deviationsMultiplesOf').hasError('required') && field.get('deviationsMultiplesOf').touched"
                                             class="error-message" style="color: red">
                                             Required.
                                          </div>

                                       </div>
                                       <label class="ByAllnew">in a</label>
                                       <div class="input-group ByAllnew">
                                          <select class="form-control" formControlName="deviationsMultiplesOfPeriod"
                                             (change)="getPayPeriod($event,i)"
                                             [disabled]="!addShiftSettingForm.get('enableGrace.' + i + '.deviationsMultiplesOfPeriod').value">
                                             <option value="week">Week</option>
                                             <option value="month">Month</option>
                                             <option value="pay_period">Pay Period</option>
                                          </select>
                                          <div
                                             *ngIf="field.get('deviationsMultiplesOfPeriod').hasError('required') && field.get('deviationsMultiplesOfPeriod').touched"
                                             class="error-message" style="color: red">
                                             Required.
                                          </div>
                                       </div>
                                    </div>
                                 </div>


                                 <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                                    <div class="col-sm-12 ">
                                       <label class="control-label col-sm-3">&nbsp;</label>
                                       <label class="col-sm-9">
                                          <p *ngIf="particularValue =='deviation_more_than'" class="S13 " id="note0012">
                                             Leave balance will be deducted when deviations exceed
                                             {{ this.deviatioMoreThan}} times in a {{deviatioMoreThanPeriod}}</p>
                                          <p *ngIf="particularValue =='deviation_multiples'" class="S13 " id="note0012">
                                             Leave balance will be deducted when deviations exceed
                                             {{this.deviatioMoreThan}} times in a {{getDeviationMultiplePeriod}}</p>
                                       </label>
                                    </div>
                                 </div>



                                 <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
                                    <div class="col-sm-12 " style="display: flex;">
                                       <label class="control-label col-sm-3">Deduct</label>
                                       <div class="input-group  PL0 FL MR10">
                                          <select class="form-control" formControlName="deductLeaveBalance">
                                             <option value="0.5">0.5</option>
                                             <option value="1">1</option>
                                          </select>
                                       </div>
                                       <label class="control-label FL PT4I ByAllnew">days from leave balance in the
                                          following order</label>
                                    </div>
                                 </div>


                                 <div class="form-group">
                                    <label class="control-label col-sm-3">&nbsp;</label>
                                    <div class="col-sm-6">
                                       <!-- <div class="Start-Time-end-time-box"> -->
                                       <!-- <div class="form-group" id="ZPAtt_shiftMarginStartLayout">
         <div class="col-sm-12"> -->

                                       <!-- <div class="input-group  PL0 FL MR10"> -->
                                       <!-- <select class="form-control" formControlName="deductLeaveReason">
                  <option  *ngFor="let item of leaveList" value="{{item.leave_type}}">{{item.leave_type}}</option>
               </select> -->

                                       <ng-multiselect-dropdown [placeholder]="'Select Leave Type'"
                                          [settings]="dropdownSettingsLeave" [data]="leaveList"
                                          formControlName="deductLeaveReason" (onSelect)="onItemSelectLeave($event)"
                                          (onSelectAll)="onSelectAllLeave($event)"
                                          (onDeSelectAll)="onUnselectAllLeave($event)"
                                          (onDeSelect)="onItemUnselectLeave($event)">
                                       </ng-multiselect-dropdown>

                                       <!-- </div> -->

                                       <!-- </div> -->
                                       <!-- <div class="col-sm-12 ">
            <div class="input-group  PL0 FL MR10">
               <input type="text" value="Absent" disabled="" class="form-control dis_lop">
            </div>
         </div> -->

                                       <!-- </div>
   </div> -->
                                    </div>
                                 </div>


                                 <div *ngIf="field.hasError('atLeastOneFieldRequired')" class="error-message"
                                    style="color: red">
                                    At least one deviation is required.
                                 </div>

                              </div>
                           </div>
                        </div>
                     </div>
                  </div>


                  <div class="form-group">
                     <a class="add-rule-btn ByAllnewRule" (click)="addField(i)">
                        <i class="fa fa-plus" aria-hidden="true"></i> Add Rule
                     </a>
                  </div>
               </div>


            </div>

            <div class="modal-footer">
               <ng-container *ngIf="popupType =='addSetting'">
                  <input type="button" class="btn btn-default"
                     [attr.data-dismiss]="addShiftSettingForm.valid ? 'modal' : 'null'" value="Submit"
                     (click)="submitData('addSetting')">
               </ng-container>

               <ng-container *ngIf="popupType !=='addSetting'">
                  <input type="button" class="btn btn-default"
                     [attr.data-dismiss]="addShiftSettingForm.valid ? 'modal' : 'null'" value="Update"
                     (click)="submitData('editSetting')">
               </ng-container>

               <input type="button" class="btn btn-default" data-dismiss="modal" (click)="closePopup()" value="Cancel">

            </div>
         </form>
      </div>
   </div>
</div>



<!-- ////////////////////////////////////delete popup ////////////////////////////////////// -->

<!-- Modal -->

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
   aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h4 class="modal-title" id="exampleModalCenterTitle">Delete Shift Specific Details</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            Are you sure you want to delete?
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">cancel</button>
            <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="deleteShift()">Delete</button>
         </div>
      </div>
   </div>
</div>